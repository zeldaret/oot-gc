# THPPlayer.c
.include "macros.inc"

.section .text, "ax"

.balign 4

glabel THPPlayerInit
/* 00A2F0 8000F890 7C0802A6 */  mflr    r0
/* 00A2F4 8000F894 3C808010 */  lis     r4, WorkBuffer@ha
/* 00A2F8 8000F898 90010004 */  stw     r0, 4(r1)
/* 00A2FC 8000F89C 38A001D0 */  li      r5, 0x1d0
/* 00A300 8000F8A0 9421FFE8 */  stwu    r1, -0x18(r1)
/* 00A304 8000F8A4 93E10014 */  stw     r31, 0x14(r1)
/* 00A308 8000F8A8 3BE496E0 */  addi    r31, r4, WorkBuffer@l
/* 00A30C 8000F8AC 38800000 */  li      r4, 0
/* 00A310 8000F8B0 93C10010 */  stw     r30, 0x10(r1)
/* 00A314 8000F8B4 3BC30000 */  addi    r30, r3, 0
/* 00A318 8000F8B8 387F05A0 */  addi    r3, r31, 0x5a0
/* 00A31C 8000F8BC 4BFF5B15 */  bl      memset
/* 00A320 8000F8C0 4808E099 */  bl      LCEnable
/* 00A324 8000F8C4 387F0060 */  addi    r3, r31, 0x60
/* 00A328 8000F8C8 389F0080 */  addi    r4, r31, 0x80
/* 00A32C 8000F8CC 38A00003 */  li      r5, 3
/* 00A330 8000F8D0 4808FCB1 */  bl      OSInitMessageQueue
/* 00A334 8000F8D4 480B90B9 */  bl      THPInit
/* 00A338 8000F8D8 2C030000 */  cmpwi   r3, 0
/* 00A33C 8000F8DC 4082000C */  bne     lbl_8000F8E8
/* 00A340 8000F8E0 38600000 */  li      r3, 0
/* 00A344 8000F8E4 480000CC */  b       lbl_8000F9B0
lbl_8000F8E8:
/* 00A348 8000F8E8 4808F415 */  bl      OSDisableInterrupts
/* 00A34C 8000F8EC 38A00000 */  li      r5, 0
/* 00A350 8000F8F0 93CD8954 */  stw     r30, AudioSystem@sda21(r13)
/* 00A354 8000F8F4 3C808001 */  lis     r4, THPAudioMixCallback@ha
/* 00A358 8000F8F8 90AD8944 */  stw     r5, SoundBufferIndex@sda21(r13)
/* 00A35C 8000F8FC 38040888 */  addi    r0, r4, THPAudioMixCallback@l
/* 00A360 8000F900 3BC30000 */  addi    r30, r3, 0
/* 00A364 8000F904 90AD894C */  stw     r5, LastAudioBuffer@sda21(r13)
/* 00A368 8000F908 7C030378 */  mr      r3, r0
/* 00A36C 8000F90C 90AD8950 */  stw     r5, CurAudioBuffer@sda21(r13)
/* 00A370 8000F910 480A8675 */  bl      AIRegisterDMACallback
/* 00A374 8000F914 906D8948 */  stw     r3, OldAIDCallback@sda21(r13)
/* 00A378 8000F918 800D8948 */  lwz     r0, OldAIDCallback@sda21(r13)
/* 00A37C 8000F91C 28000000 */  cmplwi  r0, 0
/* 00A380 8000F920 40820038 */  bne     lbl_8000F958
/* 00A384 8000F924 800D8954 */  lwz     r0, AudioSystem@sda21(r13)
/* 00A388 8000F928 2C000000 */  cmpwi   r0, 0
/* 00A38C 8000F92C 4182002C */  beq     lbl_8000F958
/* 00A390 8000F930 38600000 */  li      r3, 0
/* 00A394 8000F934 480A8651 */  bl      AIRegisterDMACallback
/* 00A398 8000F938 7FC3F378 */  mr      r3, r30
/* 00A39C 8000F93C 4808F3E9 */  bl      OSRestoreInterrupts
/* 00A3A0 8000F940 3C60800F */  lis     r3, D_800EA2E8@ha
/* 00A3A4 8000F944 4CC63182 */  crclr   6
/* 00A3A8 8000F948 3863A2E8 */  addi    r3, r3, D_800EA2E8@l
/* 00A3AC 8000F94C 4808ECAD */  bl      OSReport
/* 00A3B0 8000F950 38600000 */  li      r3, 0
/* 00A3B4 8000F954 4800005C */  b       lbl_8000F9B0
lbl_8000F958:
/* 00A3B8 8000F958 7FC3F378 */  mr      r3, r30
/* 00A3BC 8000F95C 4808F3C9 */  bl      OSRestoreInterrupts
/* 00A3C0 8000F960 800D8954 */  lwz     r0, AudioSystem@sda21(r13)
/* 00A3C4 8000F964 2C000000 */  cmpwi   r0, 0
/* 00A3C8 8000F968 4082003C */  bne     lbl_8000F9A4
/* 00A3CC 8000F96C 387F00A0 */  addi    r3, r31, 0xa0
/* 00A3D0 8000F970 38800000 */  li      r4, 0
/* 00A3D4 8000F974 38A00500 */  li      r5, 0x500
/* 00A3D8 8000F978 4BFF5A59 */  bl      memset
/* 00A3DC 8000F97C 387F00A0 */  addi    r3, r31, 0xa0
/* 00A3E0 8000F980 38800500 */  li      r4, 0x500
/* 00A3E4 8000F984 4808DDF9 */  bl      DCFlushRange
/* 00A3E8 8000F988 800D8944 */  lwz     r0, SoundBufferIndex@sda21(r13)
/* 00A3EC 8000F98C 38800280 */  li      r4, 0x280
/* 00A3F0 8000F990 1C000280 */  mulli   r0, r0, 0x280
/* 00A3F4 8000F994 7C7F0214 */  add     r3, r31, r0
/* 00A3F8 8000F998 386300A0 */  addi    r3, r3, 0xa0
/* 00A3FC 8000F99C 480A862D */  bl      AIInitDMA
/* 00A400 8000F9A0 480A86C1 */  bl      AIStartDMA
lbl_8000F9A4:
/* 00A404 8000F9A4 38000001 */  li      r0, 1
/* 00A408 8000F9A8 900D8938 */  stw     r0, Initialized@sda21(r13)
/* 00A40C 8000F9AC 38600001 */  li      r3, 1
lbl_8000F9B0:
/* 00A410 8000F9B0 8001001C */  lwz     r0, 0x1c(r1)
/* 00A414 8000F9B4 83E10014 */  lwz     r31, 0x14(r1)
/* 00A418 8000F9B8 83C10010 */  lwz     r30, 0x10(r1)
/* 00A41C 8000F9BC 7C0803A6 */  mtlr    r0
/* 00A420 8000F9C0 38210018 */  addi    r1, r1, 0x18
/* 00A424 8000F9C4 4E800020 */  blr     

glabel THPPlayerOpen
/* 00A428 8000F9C8 7C0802A6 */  mflr    r0
/* 00A42C 8000F9CC 3CA08010 */  lis     r5, WorkBuffer@ha
/* 00A430 8000F9D0 90010004 */  stw     r0, 4(r1)
/* 00A434 8000F9D4 9421FFC0 */  stwu    r1, -0x40(r1)
/* 00A438 8000F9D8 BEA10014 */  stmw    r21, 0x14(r1)
/* 00A43C 8000F9DC 3B8596E0 */  addi    r28, r5, WorkBuffer@l
/* 00A440 8000F9E0 3CA0800F */  lis     r5, VolumeTable@ha
/* 00A444 8000F9E4 3AA30000 */  addi    r21, r3, 0
/* 00A448 8000F9E8 3BC40000 */  addi    r30, r4, 0
/* 00A44C 8000F9EC 3BA5A1E8 */  addi    r29, r5, VolumeTable@l
/* 00A450 8000F9F0 800D8938 */  lwz     r0, Initialized@sda21(r13)
/* 00A454 8000F9F4 2C000000 */  cmpwi   r0, 0
/* 00A458 8000F9F8 40820018 */  bne     lbl_8000FA10
/* 00A45C 8000F9FC 387D013C */  addi    r3, r29, 0x13c
/* 00A460 8000FA00 4CC63182 */  crclr   6
/* 00A464 8000FA04 4808EBF5 */  bl      OSReport
/* 00A468 8000FA08 38600000 */  li      r3, 0
/* 00A46C 8000FA0C 48000220 */  b       lbl_8000FC2C
lbl_8000FA10:
/* 00A470 8000FA10 3BFC0640 */  addi    r31, r28, 0x640
/* 00A474 8000FA14 801C0640 */  lwz     r0, 0x640(r28)
/* 00A478 8000FA18 2C000000 */  cmpwi   r0, 0
/* 00A47C 8000FA1C 41820018 */  beq     lbl_8000FA34
/* 00A480 8000FA20 387D0178 */  addi    r3, r29, 0x178
/* 00A484 8000FA24 4CC63182 */  crclr   6
/* 00A488 8000FA28 4808EBD1 */  bl      OSReport
/* 00A48C 8000FA2C 38600000 */  li      r3, 0
/* 00A490 8000FA30 480001FC */  b       lbl_8000FC2C
lbl_8000FA34:
/* 00A494 8000FA34 3B5C0620 */  addi    r26, r28, 0x620
/* 00A498 8000FA38 387A0000 */  addi    r3, r26, 0
/* 00A49C 8000FA3C 38800000 */  li      r4, 0
/* 00A4A0 8000FA40 38A0000C */  li      r5, 0xc
/* 00A4A4 8000FA44 4BFF598D */  bl      memset
/* 00A4A8 8000FA48 3B3C062C */  addi    r25, r28, 0x62c
/* 00A4AC 8000FA4C 38790000 */  addi    r3, r25, 0
/* 00A4B0 8000FA50 38800000 */  li      r4, 0
/* 00A4B4 8000FA54 38A00010 */  li      r5, 0x10
/* 00A4B8 8000FA58 4BFF5979 */  bl      memset
/* 00A4BC 8000FA5C 38750000 */  addi    r3, r21, 0
/* 00A4C0 8000FA60 389C05A0 */  addi    r4, r28, 0x5a0
/* 00A4C4 8000FA64 480A2FD1 */  bl      DVDOpen
/* 00A4C8 8000FA68 2C030000 */  cmpwi   r3, 0
/* 00A4CC 8000FA6C 4082001C */  bne     lbl_8000FA88
/* 00A4D0 8000FA70 38950000 */  addi    r4, r21, 0
/* 00A4D4 8000FA74 4CC63182 */  crclr   6
/* 00A4D8 8000FA78 387D01B0 */  addi    r3, r29, 0x1b0
/* 00A4DC 8000FA7C 4808EB7D */  bl      OSReport
/* 00A4E0 8000FA80 38600000 */  li      r3, 0
/* 00A4E4 8000FA84 480001A8 */  b       lbl_8000FC2C
lbl_8000FA88:
/* 00A4E8 8000FA88 389C0000 */  addi    r4, r28, 0
/* 00A4EC 8000FA8C 387C05A0 */  addi    r3, r28, 0x5a0
/* 00A4F0 8000FA90 38A00040 */  li      r5, 0x40
/* 00A4F4 8000FA94 38C00000 */  li      r6, 0
/* 00A4F8 8000FA98 480023C9 */  bl      movieDVDRead
/* 00A4FC 8000FA9C 3B7C05DC */  addi    r27, r28, 0x5dc
/* 00A500 8000FAA0 387B0000 */  addi    r3, r27, 0
/* 00A504 8000FAA4 389C0000 */  addi    r4, r28, 0
/* 00A508 8000FAA8 38A00030 */  li      r5, 0x30
/* 00A50C 8000FAAC 4BFF5A19 */  bl      memcpy
/* 00A510 8000FAB0 387B0000 */  addi    r3, r27, 0
/* 00A514 8000FAB4 388D80D0 */  addi    r4, r13, D_80134DB0@sda21
/* 00A518 8000FAB8 480C0D89 */  bl      strcmp
/* 00A51C 8000FABC 2C030000 */  cmpwi   r3, 0
/* 00A520 8000FAC0 41820020 */  beq     lbl_8000FAE0
/* 00A524 8000FAC4 387D01C0 */  addi    r3, r29, 0x1c0
/* 00A528 8000FAC8 4CC63182 */  crclr   6
/* 00A52C 8000FACC 4808EB2D */  bl      OSReport
/* 00A530 8000FAD0 387C05A0 */  addi    r3, r28, 0x5a0
/* 00A534 8000FAD4 480A3029 */  bl      DVDClose
/* 00A538 8000FAD8 38600000 */  li      r3, 0
/* 00A53C 8000FADC 48000150 */  b       lbl_8000FC2C
lbl_8000FAE0:
/* 00A540 8000FAE0 807C05E0 */  lwz     r3, 0x5e0(r28)
/* 00A544 8000FAE4 3C03FFFF */  addis   r0, r3, 0xffff
/* 00A548 8000FAE8 28001000 */  cmplwi  r0, 0x1000
/* 00A54C 8000FAEC 41820020 */  beq     lbl_8000FB0C
/* 00A550 8000FAF0 387D01E0 */  addi    r3, r29, 0x1e0
/* 00A554 8000FAF4 4CC63182 */  crclr   6
/* 00A558 8000FAF8 4808EB01 */  bl      OSReport
/* 00A55C 8000FAFC 387C05A0 */  addi    r3, r28, 0x5a0
/* 00A560 8000FB00 480A2FFD */  bl      DVDClose
/* 00A564 8000FB04 38600000 */  li      r3, 0
/* 00A568 8000FB08 48000124 */  b       lbl_8000FC2C
lbl_8000FB0C:
/* 00A56C 8000FB0C 82DC05FC */  lwz     r22, 0x5fc(r28)
/* 00A570 8000FB10 389C0000 */  addi    r4, r28, 0
/* 00A574 8000FB14 387C05A0 */  addi    r3, r28, 0x5a0
/* 00A578 8000FB18 38D60000 */  addi    r6, r22, 0
/* 00A57C 8000FB1C 38A00020 */  li      r5, 0x20
/* 00A580 8000FB20 48002341 */  bl      movieDVDRead
/* 00A584 8000FB24 3AFC060C */  addi    r23, r28, 0x60c
/* 00A588 8000FB28 38770000 */  addi    r3, r23, 0
/* 00A58C 8000FB2C 389C0000 */  addi    r4, r28, 0
/* 00A590 8000FB30 38A00014 */  li      r5, 0x14
/* 00A594 8000FB34 4BFF5991 */  bl      memcpy
/* 00A598 8000FB38 38000000 */  li      r0, 0
/* 00A59C 8000FB3C 981C0647 */  stb     r0, 0x647(r28)
/* 00A5A0 8000FB40 3B1C0647 */  addi    r24, r28, 0x647
/* 00A5A4 8000FB44 3B7C05A0 */  addi    r27, r28, 0x5a0
/* 00A5A8 8000FB48 3AA00000 */  li      r21, 0
/* 00A5AC 8000FB4C 3AD60014 */  addi    r22, r22, 0x14
/* 00A5B0 8000FB50 4800009C */  b       lbl_8000FBEC
lbl_8000FB54:
/* 00A5B4 8000FB54 881B0070 */  lbz     r0, 0x70(r27)
/* 00A5B8 8000FB58 2C000001 */  cmpwi   r0, 1
/* 00A5BC 8000FB5C 41820040 */  beq     lbl_8000FB9C
/* 00A5C0 8000FB60 40800070 */  bge     lbl_8000FBD0
/* 00A5C4 8000FB64 2C000000 */  cmpwi   r0, 0
/* 00A5C8 8000FB68 40800008 */  bge     lbl_8000FB70
/* 00A5CC 8000FB6C 48000064 */  b       lbl_8000FBD0
lbl_8000FB70:
/* 00A5D0 8000FB70 389C0000 */  addi    r4, r28, 0
/* 00A5D4 8000FB74 38D60000 */  addi    r6, r22, 0
/* 00A5D8 8000FB78 387C05A0 */  addi    r3, r28, 0x5a0
/* 00A5DC 8000FB7C 38A00020 */  li      r5, 0x20
/* 00A5E0 8000FB80 480022E1 */  bl      movieDVDRead
/* 00A5E4 8000FB84 387A0000 */  addi    r3, r26, 0
/* 00A5E8 8000FB88 389C0000 */  addi    r4, r28, 0
/* 00A5EC 8000FB8C 38A0000C */  li      r5, 0xc
/* 00A5F0 8000FB90 4BFF5935 */  bl      memcpy
/* 00A5F4 8000FB94 3AD6000C */  addi    r22, r22, 0xc
/* 00A5F8 8000FB98 4800004C */  b       lbl_8000FBE4
lbl_8000FB9C:
/* 00A5FC 8000FB9C 389C0000 */  addi    r4, r28, 0
/* 00A600 8000FBA0 38D60000 */  addi    r6, r22, 0
/* 00A604 8000FBA4 387C05A0 */  addi    r3, r28, 0x5a0
/* 00A608 8000FBA8 38A00020 */  li      r5, 0x20
/* 00A60C 8000FBAC 480022B5 */  bl      movieDVDRead
/* 00A610 8000FBB0 38790000 */  addi    r3, r25, 0
/* 00A614 8000FBB4 389C0000 */  addi    r4, r28, 0
/* 00A618 8000FBB8 38A00010 */  li      r5, 0x10
/* 00A61C 8000FBBC 4BFF5909 */  bl      memcpy
/* 00A620 8000FBC0 38000001 */  li      r0, 1
/* 00A624 8000FBC4 98180000 */  stb     r0, 0(r24)
/* 00A628 8000FBC8 3AD60010 */  addi    r22, r22, 0x10
/* 00A62C 8000FBCC 48000018 */  b       lbl_8000FBE4
lbl_8000FBD0:
/* 00A630 8000FBD0 387D01F4 */  addi    r3, r29, 0x1f4
/* 00A634 8000FBD4 4CC63182 */  crclr   6
/* 00A638 8000FBD8 4808EA21 */  bl      OSReport
/* 00A63C 8000FBDC 38600000 */  li      r3, 0
/* 00A640 8000FBE0 4800004C */  b       lbl_8000FC2C
lbl_8000FBE4:
/* 00A644 8000FBE4 3B7B0001 */  addi    r27, r27, 1
/* 00A648 8000FBE8 3AB50001 */  addi    r21, r21, 1
lbl_8000FBEC:
/* 00A64C 8000FBEC 80170000 */  lwz     r0, 0(r23)
/* 00A650 8000FBF0 7C150040 */  cmplw   r21, r0
/* 00A654 8000FBF4 4180FF60 */  blt     lbl_8000FB54
/* 00A658 8000FBF8 38800000 */  li      r4, 0
/* 00A65C 8000FBFC 989C0645 */  stb     r4, 0x645(r28)
/* 00A660 8000FC00 38000001 */  li      r0, 1
/* 00A664 8000FC04 38600001 */  li      r3, 1
/* 00A668 8000FC08 989C0644 */  stb     r4, 0x644(r28)
/* 00A66C 8000FC0C 989C0646 */  stb     r4, 0x646(r28)
/* 00A670 8000FC10 93DC0650 */  stw     r30, 0x650(r28)
/* 00A674 8000FC14 901F0000 */  stw     r0, 0(r31)
/* 00A678 8000FC18 C0028070 */  lfs     f0, D_80135D70@sda21(r2)
/* 00A67C 8000FC1C D01C067C */  stfs    f0, 0x67c(r28)
/* 00A680 8000FC20 C01C067C */  lfs     f0, 0x67c(r28)
/* 00A684 8000FC24 D01C0680 */  stfs    f0, 0x680(r28)
/* 00A688 8000FC28 909C0688 */  stw     r4, 0x688(r28)
lbl_8000FC2C:
/* 00A68C 8000FC2C BAA10014 */  lmw     r21, 0x14(r1)
/* 00A690 8000FC30 80010044 */  lwz     r0, 0x44(r1)
/* 00A694 8000FC34 38210040 */  addi    r1, r1, 0x40
/* 00A698 8000FC38 7C0803A6 */  mtlr    r0
/* 00A69C 8000FC3C 4E800020 */  blr     

glabel THPPlayerCalcNeedMemory
/* 00A6A0 8000FC40 3C608010 */  lis     r3, WorkBuffer@ha
/* 00A6A4 8000FC44 38A396E0 */  addi    r5, r3, WorkBuffer@l
/* 00A6A8 8000FC48 80050640 */  lwz     r0, 0x640(r5)
/* 00A6AC 8000FC4C 2C000000 */  cmpwi   r0, 0
/* 00A6B0 8000FC50 41820090 */  beq     lbl_8000FCE0
/* 00A6B4 8000FC54 80050650 */  lwz     r0, 0x650(r5)
/* 00A6B8 8000FC58 2C000000 */  cmpwi   r0, 0
/* 00A6BC 8000FC5C 41820014 */  beq     lbl_8000FC70
/* 00A6C0 8000FC60 806505F8 */  lwz     r3, 0x5f8(r5)
/* 00A6C4 8000FC64 3803001F */  addi    r0, r3, 0x1f
/* 00A6C8 8000FC68 54060034 */  rlwinm  r6, r0, 0, 0, 0x1a
/* 00A6CC 8000FC6C 48000014 */  b       lbl_8000FC80
lbl_8000FC70:
/* 00A6D0 8000FC70 806505E4 */  lwz     r3, 0x5e4(r5)
/* 00A6D4 8000FC74 3803001F */  addi    r0, r3, 0x1f
/* 00A6D8 8000FC78 54000034 */  rlwinm  r0, r0, 0, 0, 0x1a
/* 00A6DC 8000FC7C 1CC0000A */  mulli   r6, r0, 0xa
lbl_8000FC80:
/* 00A6E0 8000FC80 80850620 */  lwz     r4, 0x620(r5)
/* 00A6E4 8000FC84 80650624 */  lwz     r3, 0x624(r5)
/* 00A6E8 8000FC88 88050647 */  lbz     r0, 0x647(r5)
/* 00A6EC 8000FC8C 7C6419D6 */  mullw   r3, r4, r3
/* 00A6F0 8000FC90 3883001F */  addi    r4, r3, 0x1f
/* 00A6F4 8000FC94 5463F0BE */  srwi    r3, r3, 2
/* 00A6F8 8000FC98 54840034 */  rlwinm  r4, r4, 0, 0, 0x1a
/* 00A6FC 8000FC9C 3863001F */  addi    r3, r3, 0x1f
/* 00A700 8000FCA0 1C840003 */  mulli   r4, r4, 3
/* 00A704 8000FCA4 54630034 */  rlwinm  r3, r3, 0, 0, 0x1a
/* 00A708 8000FCA8 1C630003 */  mulli   r3, r3, 3
/* 00A70C 8000FCAC 7CC62214 */  add     r6, r6, r4
/* 00A710 8000FCB0 7CC61A14 */  add     r6, r6, r3
/* 00A714 8000FCB4 28000000 */  cmplwi  r0, 0
/* 00A718 8000FCB8 7CC61A14 */  add     r6, r6, r3
/* 00A71C 8000FCBC 4182001C */  beq     lbl_8000FCD8
/* 00A720 8000FCC0 800505E8 */  lwz     r0, 0x5e8(r5)
/* 00A724 8000FCC4 5403103A */  slwi    r3, r0, 2
/* 00A728 8000FCC8 3803001F */  addi    r0, r3, 0x1f
/* 00A72C 8000FCCC 54000034 */  rlwinm  r0, r0, 0, 0, 0x1a
/* 00A730 8000FCD0 1C000003 */  mulli   r0, r0, 3
/* 00A734 8000FCD4 7CC60214 */  add     r6, r6, r0
lbl_8000FCD8:
/* 00A738 8000FCD8 38661000 */  addi    r3, r6, 0x1000
/* 00A73C 8000FCDC 4E800020 */  blr     
lbl_8000FCE0:
/* 00A740 8000FCE0 38600000 */  li      r3, 0
/* 00A744 8000FCE4 4E800020 */  blr     

glabel THPPlayerSetBuffer
/* 00A748 8000FCE8 7C0802A6 */  mflr    r0
/* 00A74C 8000FCEC 3C808010 */  lis     r4, WorkBuffer@ha
/* 00A750 8000FCF0 90010004 */  stw     r0, 4(r1)
/* 00A754 8000FCF4 9421FFD0 */  stwu    r1, -0x30(r1)
/* 00A758 8000FCF8 BF410018 */  stmw    r26, 0x18(r1)
/* 00A75C 8000FCFC 3BE496E0 */  addi    r31, r4, WorkBuffer@l
/* 00A760 8000FD00 801F0640 */  lwz     r0, 0x640(r31)
/* 00A764 8000FD04 2C000000 */  cmpwi   r0, 0
/* 00A768 8000FD08 418201F0 */  beq     lbl_8000FEF8
/* 00A76C 8000FD0C 881F0644 */  lbz     r0, 0x644(r31)
/* 00A770 8000FD10 28000000 */  cmplwi  r0, 0
/* 00A774 8000FD14 408201E4 */  bne     lbl_8000FEF8
/* 00A778 8000FD18 801F0650 */  lwz     r0, 0x650(r31)
/* 00A77C 8000FD1C 2C000000 */  cmpwi   r0, 0
/* 00A780 8000FD20 41820014 */  beq     lbl_8000FD34
/* 00A784 8000FD24 907F0654 */  stw     r3, 0x654(r31)
/* 00A788 8000FD28 801F05F8 */  lwz     r0, 0x5f8(r31)
/* 00A78C 8000FD2C 7FC30214 */  add     r30, r3, r0
/* 00A790 8000FD30 480000D8 */  b       lbl_8000FE08
lbl_8000FD34:
/* 00A794 8000FD34 907F06A0 */  stw     r3, 0x6a0(r31)
/* 00A798 8000FD38 38000008 */  li      r0, 8
/* 00A79C 8000FD3C 809F05E4 */  lwz     r4, 0x5e4(r31)
/* 00A7A0 8000FD40 3884001F */  addi    r4, r4, 0x1f
/* 00A7A4 8000FD44 54840034 */  rlwinm  r4, r4, 0, 0, 0x1a
/* 00A7A8 8000FD48 7FC32214 */  add     r30, r3, r4
/* 00A7AC 8000FD4C 93DF06AC */  stw     r30, 0x6ac(r31)
/* 00A7B0 8000FD50 807F05E4 */  lwz     r3, 0x5e4(r31)
/* 00A7B4 8000FD54 3863001F */  addi    r3, r3, 0x1f
/* 00A7B8 8000FD58 54630034 */  rlwinm  r3, r3, 0, 0, 0x1a
/* 00A7BC 8000FD5C 7FDE1A14 */  add     r30, r30, r3
/* 00A7C0 8000FD60 93DF06B8 */  stw     r30, 0x6b8(r31)
/* 00A7C4 8000FD64 807F05E4 */  lwz     r3, 0x5e4(r31)
/* 00A7C8 8000FD68 3863001F */  addi    r3, r3, 0x1f
/* 00A7CC 8000FD6C 54630034 */  rlwinm  r3, r3, 0, 0, 0x1a
/* 00A7D0 8000FD70 7FDE1A14 */  add     r30, r30, r3
/* 00A7D4 8000FD74 93DF06C4 */  stw     r30, 0x6c4(r31)
/* 00A7D8 8000FD78 807F05E4 */  lwz     r3, 0x5e4(r31)
/* 00A7DC 8000FD7C 3863001F */  addi    r3, r3, 0x1f
/* 00A7E0 8000FD80 54630034 */  rlwinm  r3, r3, 0, 0, 0x1a
/* 00A7E4 8000FD84 7FDE1A14 */  add     r30, r30, r3
/* 00A7E8 8000FD88 93DF06D0 */  stw     r30, 0x6d0(r31)
/* 00A7EC 8000FD8C 807F05E4 */  lwz     r3, 0x5e4(r31)
/* 00A7F0 8000FD90 3863001F */  addi    r3, r3, 0x1f
/* 00A7F4 8000FD94 54630034 */  rlwinm  r3, r3, 0, 0, 0x1a
/* 00A7F8 8000FD98 7FDE1A14 */  add     r30, r30, r3
/* 00A7FC 8000FD9C 93DF06DC */  stw     r30, 0x6dc(r31)
/* 00A800 8000FDA0 807F05E4 */  lwz     r3, 0x5e4(r31)
/* 00A804 8000FDA4 3863001F */  addi    r3, r3, 0x1f
/* 00A808 8000FDA8 54630034 */  rlwinm  r3, r3, 0, 0, 0x1a
/* 00A80C 8000FDAC 7FDE1A14 */  add     r30, r30, r3
/* 00A810 8000FDB0 93DF06E8 */  stw     r30, 0x6e8(r31)
/* 00A814 8000FDB4 807F05E4 */  lwz     r3, 0x5e4(r31)
/* 00A818 8000FDB8 3863001F */  addi    r3, r3, 0x1f
/* 00A81C 8000FDBC 54630034 */  rlwinm  r3, r3, 0, 0, 0x1a
/* 00A820 8000FDC0 7FDE1A14 */  add     r30, r30, r3
/* 00A824 8000FDC4 93DF06F4 */  stw     r30, 0x6f4(r31)
/* 00A828 8000FDC8 807F05E4 */  lwz     r3, 0x5e4(r31)
/* 00A82C 8000FDCC 3863001F */  addi    r3, r3, 0x1f
/* 00A830 8000FDD0 54630034 */  rlwinm  r3, r3, 0, 0, 0x1a
/* 00A834 8000FDD4 7FDE1A14 */  add     r30, r30, r3
/* 00A838 8000FDD8 48000128 */  b       lbl_8000FF00
lbl_8000FDDC:
/* 00A83C 8000FDDC 2060000A */  subfic  r3, r0, 0xa
/* 00A840 8000FDE0 2800000A */  cmplwi  r0, 0xa
/* 00A844 8000FDE4 7C6903A6 */  mtctr   r3
/* 00A848 8000FDE8 40800020 */  bge     lbl_8000FE08
lbl_8000FDEC:
/* 00A84C 8000FDEC 93C40100 */  stw     r30, 0x100(r4)
/* 00A850 8000FDF0 3884000C */  addi    r4, r4, 0xc
/* 00A854 8000FDF4 807F05E4 */  lwz     r3, 0x5e4(r31)
/* 00A858 8000FDF8 3803001F */  addi    r0, r3, 0x1f
/* 00A85C 8000FDFC 54000034 */  rlwinm  r0, r0, 0, 0, 0x1a
/* 00A860 8000FE00 7FDE0214 */  add     r30, r30, r0
/* 00A864 8000FE04 4200FFE8 */  bdnz    lbl_8000FDEC
lbl_8000FE08:
/* 00A868 8000FE08 807F0620 */  lwz     r3, 0x620(r31)
/* 00A86C 8000FE0C 3BBF05A0 */  addi    r29, r31, 0x5a0
/* 00A870 8000FE10 801F0624 */  lwz     r0, 0x624(r31)
/* 00A874 8000FE14 3B800000 */  li      r28, 0
/* 00A878 8000FE18 7C8301D6 */  mullw   r4, r3, r0
/* 00A87C 8000FE1C 5483F0BE */  srwi    r3, r4, 2
/* 00A880 8000FE20 3884001F */  addi    r4, r4, 0x1f
/* 00A884 8000FE24 3803001F */  addi    r0, r3, 0x1f
/* 00A888 8000FE28 549B0034 */  rlwinm  r27, r4, 0, 0, 0x1a
/* 00A88C 8000FE2C 541A0034 */  rlwinm  r26, r0, 0, 0, 0x1a
lbl_8000FE30:
/* 00A890 8000FE30 93DD0178 */  stw     r30, 0x178(r29)
/* 00A894 8000FE34 387E0000 */  addi    r3, r30, 0
/* 00A898 8000FE38 389B0000 */  addi    r4, r27, 0
/* 00A89C 8000FE3C 4808D915 */  bl      DCInvalidateRange
/* 00A8A0 8000FE40 7FDEDA14 */  add     r30, r30, r27
/* 00A8A4 8000FE44 93DD017C */  stw     r30, 0x17c(r29)
/* 00A8A8 8000FE48 387E0000 */  addi    r3, r30, 0
/* 00A8AC 8000FE4C 389A0000 */  addi    r4, r26, 0
/* 00A8B0 8000FE50 4808D901 */  bl      DCInvalidateRange
/* 00A8B4 8000FE54 7FDED214 */  add     r30, r30, r26
/* 00A8B8 8000FE58 93DD0180 */  stw     r30, 0x180(r29)
/* 00A8BC 8000FE5C 387E0000 */  addi    r3, r30, 0
/* 00A8C0 8000FE60 389A0000 */  addi    r4, r26, 0
/* 00A8C4 8000FE64 4808D8ED */  bl      DCInvalidateRange
/* 00A8C8 8000FE68 3B9C0001 */  addi    r28, r28, 1
/* 00A8CC 8000FE6C 281C0003 */  cmplwi  r28, 3
/* 00A8D0 8000FE70 7FDED214 */  add     r30, r30, r26
/* 00A8D4 8000FE74 3BBD0010 */  addi    r29, r29, 0x10
/* 00A8D8 8000FE78 4180FFB8 */  blt     lbl_8000FE30
/* 00A8DC 8000FE7C 881F0647 */  lbz     r0, 0x647(r31)
/* 00A8E0 8000FE80 28000000 */  cmplwi  r0, 0
/* 00A8E4 8000FE84 41820068 */  beq     lbl_8000FEEC
/* 00A8E8 8000FE88 93DF0748 */  stw     r30, 0x748(r31)
/* 00A8EC 8000FE8C 38800000 */  li      r4, 0
/* 00A8F0 8000FE90 93DF074C */  stw     r30, 0x74c(r31)
/* 00A8F4 8000FE94 909F0750 */  stw     r4, 0x750(r31)
/* 00A8F8 8000FE98 801F05E8 */  lwz     r0, 0x5e8(r31)
/* 00A8FC 8000FE9C 5403103A */  slwi    r3, r0, 2
/* 00A900 8000FEA0 3803001F */  addi    r0, r3, 0x1f
/* 00A904 8000FEA4 54000034 */  rlwinm  r0, r0, 0, 0, 0x1a
/* 00A908 8000FEA8 7FDE0214 */  add     r30, r30, r0
/* 00A90C 8000FEAC 93DF0754 */  stw     r30, 0x754(r31)
/* 00A910 8000FEB0 93DF0758 */  stw     r30, 0x758(r31)
/* 00A914 8000FEB4 909F075C */  stw     r4, 0x75c(r31)
/* 00A918 8000FEB8 801F05E8 */  lwz     r0, 0x5e8(r31)
/* 00A91C 8000FEBC 5403103A */  slwi    r3, r0, 2
/* 00A920 8000FEC0 3803001F */  addi    r0, r3, 0x1f
/* 00A924 8000FEC4 54000034 */  rlwinm  r0, r0, 0, 0, 0x1a
/* 00A928 8000FEC8 7FDE0214 */  add     r30, r30, r0
/* 00A92C 8000FECC 93DF0760 */  stw     r30, 0x760(r31)
/* 00A930 8000FED0 93DF0764 */  stw     r30, 0x764(r31)
/* 00A934 8000FED4 909F0768 */  stw     r4, 0x768(r31)
/* 00A938 8000FED8 801F05E8 */  lwz     r0, 0x5e8(r31)
/* 00A93C 8000FEDC 5403103A */  slwi    r3, r0, 2
/* 00A940 8000FEE0 3803001F */  addi    r0, r3, 0x1f
/* 00A944 8000FEE4 54000034 */  rlwinm  r0, r0, 0, 0, 0x1a
/* 00A948 8000FEE8 7FDE0214 */  add     r30, r30, r0
lbl_8000FEEC:
/* 00A94C 8000FEEC 93DF063C */  stw     r30, 0x63c(r31)
/* 00A950 8000FEF0 38600001 */  li      r3, 1
/* 00A954 8000FEF4 4800001C */  b       lbl_8000FF10
lbl_8000FEF8:
/* 00A958 8000FEF8 38600000 */  li      r3, 0
/* 00A95C 8000FEFC 48000014 */  b       lbl_8000FF10
lbl_8000FF00:
/* 00A960 8000FF00 1C60000C */  mulli   r3, r0, 0xc
/* 00A964 8000FF04 7C9F1A14 */  add     r4, r31, r3
/* 00A968 8000FF08 388405A0 */  addi    r4, r4, 0x5a0
/* 00A96C 8000FF0C 4BFFFED0 */  b       lbl_8000FDDC
lbl_8000FF10:
/* 00A970 8000FF10 BB410018 */  lmw     r26, 0x18(r1)
/* 00A974 8000FF14 80010034 */  lwz     r0, 0x34(r1)
/* 00A978 8000FF18 38210030 */  addi    r1, r1, 0x30
/* 00A97C 8000FF1C 7C0803A6 */  mtlr    r0
/* 00A980 8000FF20 4E800020 */  blr     

InitAllMessageQueue:
/* 00A984 8000FF24 7C0802A6 */  mflr    r0
/* 00A988 8000FF28 3C608010 */  lis     r3, WorkBuffer@ha
/* 00A98C 8000FF2C 90010004 */  stw     r0, 4(r1)
/* 00A990 8000FF30 9421FFE8 */  stwu    r1, -0x18(r1)
/* 00A994 8000FF34 93E10014 */  stw     r31, 0x14(r1)
/* 00A998 8000FF38 3BE396E0 */  addi    r31, r3, WorkBuffer@l
/* 00A99C 8000FF3C 93C10010 */  stw     r30, 0x10(r1)
/* 00A9A0 8000FF40 93A1000C */  stw     r29, 0xc(r1)
/* 00A9A4 8000FF44 93810008 */  stw     r28, 8(r1)
/* 00A9A8 8000FF48 801F0650 */  lwz     r0, 0x650(r31)
/* 00A9AC 8000FF4C 2C000000 */  cmpwi   r0, 0
/* 00A9B0 8000FF50 40820024 */  bne     lbl_8000FF74
/* 00A9B4 8000FF54 3B800000 */  li      r28, 0
/* 00A9B8 8000FF58 3BDF05A0 */  addi    r30, r31, 0x5a0
lbl_8000FF5C:
/* 00A9BC 8000FF5C 387E0100 */  addi    r3, r30, 0x100
/* 00A9C0 8000FF60 48001A3D */  bl      PushFreeReadBuffer
/* 00A9C4 8000FF64 3B9C0001 */  addi    r28, r28, 1
/* 00A9C8 8000FF68 2C1C000A */  cmpwi   r28, 0xa
/* 00A9CC 8000FF6C 3BDE000C */  addi    r30, r30, 0xc
/* 00A9D0 8000FF70 4180FFEC */  blt     lbl_8000FF5C
lbl_8000FF74:
/* 00A9D4 8000FF74 3BBF05A0 */  addi    r29, r31, 0x5a0
/* 00A9D8 8000FF78 3BDD0000 */  addi    r30, r29, 0
/* 00A9DC 8000FF7C 3B800000 */  li      r28, 0
lbl_8000FF80:
/* 00A9E0 8000FF80 387E0178 */  addi    r3, r30, 0x178
/* 00A9E4 8000FF84 48003419 */  bl      PushFreeTextureSet
/* 00A9E8 8000FF88 3B9C0001 */  addi    r28, r28, 1
/* 00A9EC 8000FF8C 2C1C0003 */  cmpwi   r28, 3
/* 00A9F0 8000FF90 3BDE0010 */  addi    r30, r30, 0x10
/* 00A9F4 8000FF94 4180FFEC */  blt     lbl_8000FF80
/* 00A9F8 8000FF98 881F0647 */  lbz     r0, 0x647(r31)
/* 00A9FC 8000FF9C 28000000 */  cmplwi  r0, 0
/* 00AA00 8000FFA0 41820020 */  beq     lbl_8000FFC0
/* 00AA04 8000FFA4 3BC00000 */  li      r30, 0
lbl_8000FFA8:
/* 00AA08 8000FFA8 387D01A8 */  addi    r3, r29, 0x1a8
/* 00AA0C 8000FFAC 480010E9 */  bl      PushFreeAudioBuffer
/* 00AA10 8000FFB0 3BDE0001 */  addi    r30, r30, 1
/* 00AA14 8000FFB4 2C1E0003 */  cmpwi   r30, 3
/* 00AA18 8000FFB8 3BBD000C */  addi    r29, r29, 0xc
/* 00AA1C 8000FFBC 4180FFEC */  blt     lbl_8000FFA8
lbl_8000FFC0:
/* 00AA20 8000FFC0 387F0040 */  addi    r3, r31, 0x40
/* 00AA24 8000FFC4 388D893C */  addi    r4, r13, PrepareReadyMessage@sda21
/* 00AA28 8000FFC8 38A00001 */  li      r5, 1
/* 00AA2C 8000FFCC 4808F5B5 */  bl      OSInitMessageQueue
/* 00AA30 8000FFD0 8001001C */  lwz     r0, 0x1c(r1)
/* 00AA34 8000FFD4 83E10014 */  lwz     r31, 0x14(r1)
/* 00AA38 8000FFD8 83C10010 */  lwz     r30, 0x10(r1)
/* 00AA3C 8000FFDC 7C0803A6 */  mtlr    r0
/* 00AA40 8000FFE0 83A1000C */  lwz     r29, 0xc(r1)
/* 00AA44 8000FFE4 83810008 */  lwz     r28, 8(r1)
/* 00AA48 8000FFE8 38210018 */  addi    r1, r1, 0x18
/* 00AA4C 8000FFEC 4E800020 */  blr     

glabel PrepareReady
/* 00AA50 8000FFF0 7C0802A6 */  mflr    r0
/* 00AA54 8000FFF4 3CA08010 */  lis     r5, PrepareReadyQueue@ha
/* 00AA58 8000FFF8 90010004 */  stw     r0, 4(r1)
/* 00AA5C 8000FFFC 38830000 */  addi    r4, r3, 0
/* 00AA60 80010000 38659720 */  addi    r3, r5, PrepareReadyQueue@l
/* 00AA64 80010004 9421FFF8 */  stwu    r1, -8(r1)
/* 00AA68 80010008 38A00001 */  li      r5, 1
/* 00AA6C 8001000C 4808F5D5 */  bl      OSSendMessage
/* 00AA70 80010010 8001000C */  lwz     r0, 0xc(r1)
/* 00AA74 80010014 38210008 */  addi    r1, r1, 8
/* 00AA78 80010018 7C0803A6 */  mtlr    r0
/* 00AA7C 8001001C 4E800020 */  blr     

glabel THPPlayerPrepare
/* 00AA80 80010020 7C0802A6 */  mflr    r0
/* 00AA84 80010024 3CC08010 */  lis     r6, WorkBuffer@ha
/* 00AA88 80010028 90010004 */  stw     r0, 4(r1)
/* 00AA8C 8001002C 9421FFD0 */  stwu    r1, -0x30(r1)
/* 00AA90 80010030 BF410018 */  stmw    r26, 0x18(r1)
/* 00AA94 80010034 3BC696E0 */  addi    r30, r6, WorkBuffer@l
/* 00AA98 80010038 3CC0800F */  lis     r6, VolumeTable@ha
/* 00AA9C 8001003C 3BA30000 */  addi    r29, r3, 0
/* 00AAA0 80010040 3B440000 */  addi    r26, r4, 0
/* 00AAA4 80010044 3B650000 */  addi    r27, r5, 0
/* 00AAA8 80010048 3BE6A1E8 */  addi    r31, r6, VolumeTable@l
/* 00AAAC 8001004C 801E0640 */  lwz     r0, 0x640(r30)
/* 00AAB0 80010050 2C000000 */  cmpwi   r0, 0
/* 00AAB4 80010054 41820228 */  beq     lbl_8001027C
/* 00AAB8 80010058 3B9E0644 */  addi    r28, r30, 0x644
/* 00AABC 8001005C 881E0644 */  lbz     r0, 0x644(r30)
/* 00AAC0 80010060 28000000 */  cmplwi  r0, 0
/* 00AAC4 80010064 40820218 */  bne     lbl_8001027C
/* 00AAC8 80010068 2C1D0000 */  cmpwi   r29, 0
/* 00AACC 8001006C 40810084 */  ble     lbl_800100F0
/* 00AAD0 80010070 807E0600 */  lwz     r3, 0x600(r30)
/* 00AAD4 80010074 28030000 */  cmplwi  r3, 0
/* 00AAD8 80010078 40820018 */  bne     lbl_80010090
/* 00AADC 8001007C 387F0210 */  addi    r3, r31, 0x210
/* 00AAE0 80010080 4CC63182 */  crclr   6
/* 00AAE4 80010084 4808E575 */  bl      OSReport
/* 00AAE8 80010088 38600000 */  li      r3, 0
/* 00AAEC 8001008C 480001F4 */  b       lbl_80010280
lbl_80010090:
/* 00AAF0 80010090 801E05F0 */  lwz     r0, 0x5f0(r30)
/* 00AAF4 80010094 7C00E840 */  cmplw   r0, r29
/* 00AAF8 80010098 40810044 */  ble     lbl_800100DC
/* 00AAFC 8001009C 381DFFFF */  addi    r0, r29, -1
/* 00AB00 800100A0 5400103A */  slwi    r0, r0, 2
/* 00AB04 800100A4 7CC30214 */  add     r6, r3, r0
/* 00AB08 800100A8 389E0000 */  addi    r4, r30, 0
/* 00AB0C 800100AC 387E05A0 */  addi    r3, r30, 0x5a0
/* 00AB10 800100B0 38A00020 */  li      r5, 0x20
/* 00AB14 800100B4 48001DAD */  bl      movieDVDRead
/* 00AB18 800100B8 801E0604 */  lwz     r0, 0x604(r30)
/* 00AB1C 800100BC 807E0000 */  lwz     r3, 0(r30)
/* 00AB20 800100C0 7C001A14 */  add     r0, r0, r3
/* 00AB24 800100C4 901E0658 */  stw     r0, 0x658(r30)
/* 00AB28 800100C8 93BE0660 */  stw     r29, 0x660(r30)
/* 00AB2C 800100CC 801E0004 */  lwz     r0, 4(r30)
/* 00AB30 800100D0 7C030050 */  subf    r0, r3, r0
/* 00AB34 800100D4 901E065C */  stw     r0, 0x65c(r30)
/* 00AB38 800100D8 4800002C */  b       lbl_80010104
lbl_800100DC:
/* 00AB3C 800100DC 387F023C */  addi    r3, r31, 0x23c
/* 00AB40 800100E0 4CC63182 */  crclr   6
/* 00AB44 800100E4 4808E515 */  bl      OSReport
/* 00AB48 800100E8 38600000 */  li      r3, 0
/* 00AB4C 800100EC 48000194 */  b       lbl_80010280
lbl_800100F0:
/* 00AB50 800100F0 801E0604 */  lwz     r0, 0x604(r30)
/* 00AB54 800100F4 901E0658 */  stw     r0, 0x658(r30)
/* 00AB58 800100F8 801E05F4 */  lwz     r0, 0x5f4(r30)
/* 00AB5C 800100FC 901E065C */  stw     r0, 0x65c(r30)
/* 00AB60 80010100 93BE0660 */  stw     r29, 0x660(r30)
lbl_80010104:
/* 00AB64 80010104 3BBE0647 */  addi    r29, r30, 0x647
/* 00AB68 80010108 881E0647 */  lbz     r0, 0x647(r30)
/* 00AB6C 8001010C 28000000 */  cmplwi  r0, 0
/* 00AB70 80010110 41820030 */  beq     lbl_80010140
/* 00AB74 80010114 2C1B0000 */  cmpwi   r27, 0
/* 00AB78 80010118 41800010 */  blt     lbl_80010128
/* 00AB7C 8001011C 801E0638 */  lwz     r0, 0x638(r30)
/* 00AB80 80010120 7C1B0040 */  cmplw   r27, r0
/* 00AB84 80010124 41800018 */  blt     lbl_8001013C
lbl_80010128:
/* 00AB88 80010128 387F0270 */  addi    r3, r31, 0x270
/* 00AB8C 8001012C 4CC63182 */  crclr   6
/* 00AB90 80010130 4808E4C9 */  bl      OSReport
/* 00AB94 80010134 38600000 */  li      r3, 0
/* 00AB98 80010138 48000148 */  b       lbl_80010280
lbl_8001013C:
/* 00AB9C 8001013C 937E068C */  stw     r27, 0x68c(r30)
lbl_80010140:
/* 00ABA0 80010140 575A07FE */  clrlwi  r26, r26, 0x1f
/* 00ABA4 80010144 9B5E0646 */  stb     r26, 0x646(r30)
/* 00ABA8 80010148 38000000 */  li      r0, 0
/* 00ABAC 8001014C 3BFE0650 */  addi    r31, r30, 0x650
/* 00ABB0 80010150 901E0678 */  stw     r0, 0x678(r30)
/* 00ABB4 80010154 801E0650 */  lwz     r0, 0x650(r30)
/* 00ABB8 80010158 2C000000 */  cmpwi   r0, 0
/* 00ABBC 8001015C 4182005C */  beq     lbl_800101B8
/* 00ABC0 80010160 3B5E0654 */  addi    r26, r30, 0x654
/* 00ABC4 80010164 80BE05F8 */  lwz     r5, 0x5f8(r30)
/* 00ABC8 80010168 3B7E0604 */  addi    r27, r30, 0x604
/* 00ABCC 8001016C 809E0654 */  lwz     r4, 0x654(r30)
/* 00ABD0 80010170 80DE0604 */  lwz     r6, 0x604(r30)
/* 00ABD4 80010174 387E05A0 */  addi    r3, r30, 0x5a0
/* 00ABD8 80010178 48001CE9 */  bl      movieDVDRead
/* 00ABDC 8001017C 809A0000 */  lwz     r4, 0(r26)
/* 00ABE0 80010180 38600014 */  li      r3, 0x14
/* 00ABE4 80010184 801E0658 */  lwz     r0, 0x658(r30)
/* 00ABE8 80010188 80BB0000 */  lwz     r5, 0(r27)
/* 00ABEC 8001018C 7C040214 */  add     r0, r4, r0
/* 00ABF0 80010190 7F450050 */  subf    r26, r5, r0
/* 00ABF4 80010194 389A0000 */  addi    r4, r26, 0
/* 00ABF8 80010198 48002D89 */  bl      CreateVideoDecodeThread
/* 00ABFC 8001019C 881D0000 */  lbz     r0, 0(r29)
/* 00AC00 800101A0 28000000 */  cmplwi  r0, 0
/* 00AC04 800101A4 41820040 */  beq     lbl_800101E4
/* 00AC08 800101A8 3860000C */  li      r3, 0xc
/* 00AC0C 800101AC 389A0000 */  addi    r4, r26, 0
/* 00AC10 800101B0 48000BED */  bl      CreateAudioDecodeThread
/* 00AC14 800101B4 48000030 */  b       lbl_800101E4
lbl_800101B8:
/* 00AC18 800101B8 38600014 */  li      r3, 0x14
/* 00AC1C 800101BC 38800000 */  li      r4, 0
/* 00AC20 800101C0 48002D61 */  bl      CreateVideoDecodeThread
/* 00AC24 800101C4 881D0000 */  lbz     r0, 0(r29)
/* 00AC28 800101C8 28000000 */  cmplwi  r0, 0
/* 00AC2C 800101CC 41820010 */  beq     lbl_800101DC
/* 00AC30 800101D0 3860000C */  li      r3, 0xc
/* 00AC34 800101D4 38800000 */  li      r4, 0
/* 00AC38 800101D8 48000BC5 */  bl      CreateAudioDecodeThread
lbl_800101DC:
/* 00AC3C 800101DC 38600008 */  li      r3, 8
/* 00AC40 800101E0 48001981 */  bl      CreateReadThread
lbl_800101E4:
/* 00AC44 800101E4 4BFFFD41 */  bl      InitAllMessageQueue
/* 00AC48 800101E8 48002E1D */  bl      VideoDecodeThreadStart
/* 00AC4C 800101EC 881D0000 */  lbz     r0, 0(r29)
/* 00AC50 800101F0 28000000 */  cmplwi  r0, 0
/* 00AC54 800101F4 41820008 */  beq     lbl_800101FC
/* 00AC58 800101F8 48000C85 */  bl      AudioDecodeThreadStart
lbl_800101FC:
/* 00AC5C 800101FC 801F0000 */  lwz     r0, 0(r31)
/* 00AC60 80010200 2C000000 */  cmpwi   r0, 0
/* 00AC64 80010204 40820008 */  bne     lbl_8001020C
/* 00AC68 80010208 48001925 */  bl      ReadThreadStart
lbl_8001020C:
/* 00AC6C 8001020C 387E0040 */  addi    r3, r30, 0x40
/* 00AC70 80010210 38810014 */  addi    r4, r1, 0x14
/* 00AC74 80010214 38A00001 */  li      r5, 1
/* 00AC78 80010218 4808F491 */  bl      OSReceiveMessage
/* 00AC7C 8001021C 80010014 */  lwz     r0, 0x14(r1)
/* 00AC80 80010220 2C000000 */  cmpwi   r0, 0
/* 00AC84 80010224 4182000C */  beq     lbl_80010230
/* 00AC88 80010228 38000001 */  li      r0, 1
/* 00AC8C 8001022C 48000008 */  b       lbl_80010234
lbl_80010230:
/* 00AC90 80010230 38000000 */  li      r0, 0
lbl_80010234:
/* 00AC94 80010234 2C000000 */  cmpwi   r0, 0
/* 00AC98 80010238 4082000C */  bne     lbl_80010244
/* 00AC9C 8001023C 38600000 */  li      r3, 0
/* 00ACA0 80010240 48000040 */  b       lbl_80010280
lbl_80010244:
/* 00ACA4 80010244 38000001 */  li      r0, 1
/* 00ACA8 80010248 981C0000 */  stb     r0, 0(r28)
/* 00ACAC 8001024C 38000000 */  li      r0, 0
/* 00ACB0 80010250 3C608001 */  lis     r3, PlayControl@ha
/* 00ACB4 80010254 981E0645 */  stb     r0, 0x645(r30)
/* 00ACB8 80010258 386302F0 */  addi    r3, r3, PlayControl@l
/* 00ACBC 8001025C 901E0698 */  stw     r0, 0x698(r30)
/* 00ACC0 80010260 901E069C */  stw     r0, 0x69c(r30)
/* 00ACC4 80010264 901E0690 */  stw     r0, 0x690(r30)
/* 00ACC8 80010268 901E0694 */  stw     r0, 0x694(r30)
/* 00ACCC 8001026C 48095F1D */  bl      VISetPostRetraceCallback
/* 00ACD0 80010270 906D8940 */  stw     r3, OldVIPostCallback@sda21(r13)
/* 00ACD4 80010274 38600001 */  li      r3, 1
/* 00ACD8 80010278 48000008 */  b       lbl_80010280
lbl_8001027C:
/* 00ACDC 8001027C 38600000 */  li      r3, 0
lbl_80010280:
/* 00ACE0 80010280 BB410018 */  lmw     r26, 0x18(r1)
/* 00ACE4 80010284 80010034 */  lwz     r0, 0x34(r1)
/* 00ACE8 80010288 38210030 */  addi    r1, r1, 0x30
/* 00ACEC 8001028C 7C0803A6 */  mtlr    r0
/* 00ACF0 80010290 4E800020 */  blr     

glabel THPPlayerPlay
/* 00ACF4 80010294 3C608010 */  lis     r3, WorkBuffer@ha
/* 00ACF8 80010298 38A396E0 */  addi    r5, r3, WorkBuffer@l
/* 00ACFC 8001029C 80050640 */  lwz     r0, 0x640(r5)
/* 00AD00 800102A0 2C000000 */  cmpwi   r0, 0
/* 00AD04 800102A4 41820044 */  beq     lbl_800102E8
/* 00AD08 800102A8 38650644 */  addi    r3, r5, 0x644
/* 00AD0C 800102AC 88050644 */  lbz     r0, 0x644(r5)
/* 00AD10 800102B0 28000001 */  cmplwi  r0, 1
/* 00AD14 800102B4 4182000C */  beq     lbl_800102C0
/* 00AD18 800102B8 28000004 */  cmplwi  r0, 4
/* 00AD1C 800102BC 4082002C */  bne     lbl_800102E8
lbl_800102C0:
/* 00AD20 800102C0 38000002 */  li      r0, 2
/* 00AD24 800102C4 98030000 */  stb     r0, 0(r3)
/* 00AD28 800102C8 38800000 */  li      r4, 0
/* 00AD2C 800102CC 3800FFFF */  li      r0, -1
/* 00AD30 800102D0 90850670 */  stw     r4, 0x670(r5)
/* 00AD34 800102D4 38600001 */  li      r3, 1
/* 00AD38 800102D8 90850674 */  stw     r4, 0x674(r5)
/* 00AD3C 800102DC 9005066C */  stw     r0, 0x66c(r5)
/* 00AD40 800102E0 90050668 */  stw     r0, 0x668(r5)
/* 00AD44 800102E4 4E800020 */  blr     
lbl_800102E8:
/* 00AD48 800102E8 38600000 */  li      r3, 0
/* 00AD4C 800102EC 4E800020 */  blr     

PlayControl:
/* 00AD50 800102F0 7C0802A6 */  mflr    r0
/* 00AD54 800102F4 3C808010 */  lis     r4, WorkBuffer@ha
/* 00AD58 800102F8 90010004 */  stw     r0, 4(r1)
/* 00AD5C 800102FC 9421FFE0 */  stwu    r1, -0x20(r1)
/* 00AD60 80010300 93E1001C */  stw     r31, 0x1c(r1)
/* 00AD64 80010304 3BE496E0 */  addi    r31, r4, WorkBuffer@l
/* 00AD68 80010308 93C10018 */  stw     r30, 0x18(r1)
/* 00AD6C 8001030C 93A10014 */  stw     r29, 0x14(r1)
/* 00AD70 80010310 93810010 */  stw     r28, 0x10(r1)
/* 00AD74 80010314 818D8940 */  lwz     r12, OldVIPostCallback@sda21(r13)
/* 00AD78 80010318 280C0000 */  cmplwi  r12, 0
/* 00AD7C 8001031C 4182000C */  beq     lbl_80010328
/* 00AD80 80010320 7D8803A6 */  mtlr    r12
/* 00AD84 80010324 4E800021 */  blrl    
lbl_80010328:
/* 00AD88 80010328 801F0640 */  lwz     r0, 0x640(r31)
/* 00AD8C 8001032C 3BA0FFFF */  li      r29, -1
/* 00AD90 80010330 2C000000 */  cmpwi   r0, 0
/* 00AD94 80010334 41820238 */  beq     lbl_8001056C
/* 00AD98 80010338 3BDF0644 */  addi    r30, r31, 0x644
/* 00AD9C 8001033C 881F0644 */  lbz     r0, 0x644(r31)
/* 00ADA0 80010340 28000002 */  cmplwi  r0, 2
/* 00ADA4 80010344 40820228 */  bne     lbl_8001056C
/* 00ADA8 80010348 801F0648 */  lwz     r0, 0x648(r31)
/* 00ADAC 8001034C 2C000000 */  cmpwi   r0, 0
/* 00ADB0 80010350 40820010 */  bne     lbl_80010360
/* 00ADB4 80010354 801F064C */  lwz     r0, 0x64c(r31)
/* 00ADB8 80010358 2C000000 */  cmpwi   r0, 0
/* 00ADBC 8001035C 41820014 */  beq     lbl_80010370
lbl_80010360:
/* 00ADC0 80010360 38000005 */  li      r0, 5
/* 00ADC4 80010364 981F0645 */  stb     r0, 0x645(r31)
/* 00ADC8 80010368 981E0000 */  stb     r0, 0(r30)
/* 00ADCC 8001036C 48000200 */  b       lbl_8001056C
lbl_80010370:
/* 00ADD0 80010370 801F066C */  lwz     r0, 0x66c(r31)
/* 00ADD4 80010374 38A00001 */  li      r5, 1
/* 00ADD8 80010378 807F0668 */  lwz     r3, 0x668(r31)
/* 00ADDC 8001037C 38800000 */  li      r4, 0
/* 00ADE0 80010380 7C002814 */  addc    r0, r0, r5
/* 00ADE4 80010384 901F066C */  stw     r0, 0x66c(r31)
/* 00ADE8 80010388 7C032114 */  adde    r0, r3, r4
/* 00ADEC 8001038C 3B9F0668 */  addi    r28, r31, 0x668
/* 00ADF0 80010390 901F0668 */  stw     r0, 0x668(r31)
/* 00ADF4 80010394 80DF0668 */  lwz     r6, 0x668(r31)
/* 00ADF8 80010398 80FF066C */  lwz     r7, 0x66c(r31)
/* 00ADFC 8001039C 7CC02278 */  xor     r0, r6, r4
/* 00AE00 800103A0 7CE32278 */  xor     r3, r7, r4
/* 00AE04 800103A4 7C600379 */  or.     r0, r3, r0
/* 00AE08 800103A8 40820088 */  bne     lbl_80010430
/* 00AE0C 800103AC 480001E1 */  bl      ProperTimingForStart
/* 00AE10 800103B0 2C030000 */  cmpwi   r3, 0
/* 00AE14 800103B4 4182006C */  beq     lbl_80010420
/* 00AE18 800103B8 881F0647 */  lbz     r0, 0x647(r31)
/* 00AE1C 800103BC 28000000 */  cmplwi  r0, 0
/* 00AE20 800103C0 41820050 */  beq     lbl_80010410
/* 00AE24 800103C4 3B9F0690 */  addi    r28, r31, 0x690
/* 00AE28 800103C8 807F0694 */  lwz     r3, 0x694(r31)
/* 00AE2C 800103CC 801F0690 */  lwz     r0, 0x690(r31)
/* 00AE30 800103D0 7C030050 */  subf    r0, r3, r0
/* 00AE34 800103D4 2C000001 */  cmpwi   r0, 1
/* 00AE38 800103D8 4181002C */  bgt     lbl_80010404
/* 00AE3C 800103DC 38600000 */  li      r3, 0
/* 00AE40 800103E0 48002FED */  bl      PopDecodedTextureSet
/* 00AE44 800103E4 809F0678 */  lwz     r4, 0x678(r31)
/* 00AE48 800103E8 3BA30000 */  addi    r29, r3, 0
/* 00AE4C 800103EC 3804FFFF */  addi    r0, r4, -1
/* 00AE50 800103F0 901F0678 */  stw     r0, 0x678(r31)
/* 00AE54 800103F4 807C0000 */  lwz     r3, 0(r28)
/* 00AE58 800103F8 38030001 */  addi    r0, r3, 1
/* 00AE5C 800103FC 901C0000 */  stw     r0, 0(r28)
/* 00AE60 80010400 480000AC */  b       lbl_800104AC
lbl_80010404:
/* 00AE64 80010404 38000002 */  li      r0, 2
/* 00AE68 80010408 981F0645 */  stb     r0, 0x645(r31)
/* 00AE6C 8001040C 480000A0 */  b       lbl_800104AC
lbl_80010410:
/* 00AE70 80010410 38600000 */  li      r3, 0
/* 00AE74 80010414 48002FB9 */  bl      PopDecodedTextureSet
/* 00AE78 80010418 7C7D1B78 */  mr      r29, r3
/* 00AE7C 8001041C 48000090 */  b       lbl_800104AC
lbl_80010420:
/* 00AE80 80010420 3800FFFF */  li      r0, -1
/* 00AE84 80010424 901C0004 */  stw     r0, 4(r28)
/* 00AE88 80010428 901C0000 */  stw     r0, 0(r28)
/* 00AE8C 8001042C 48000080 */  b       lbl_800104AC
lbl_80010430:
/* 00AE90 80010430 7CE32A78 */  xor     r3, r7, r5
/* 00AE94 80010434 7CC02278 */  xor     r0, r6, r4
/* 00AE98 80010438 7C600379 */  or.     r0, r3, r0
/* 00AE9C 8001043C 4082000C */  bne     lbl_80010448
/* 00AEA0 80010440 38000002 */  li      r0, 2
/* 00AEA4 80010444 981F0645 */  stb     r0, 0x645(r31)
lbl_80010448:
/* 00AEA8 80010448 480001B1 */  bl      ProperTimingForGettingNextFrame
/* 00AEAC 8001044C 2C030000 */  cmpwi   r3, 0
/* 00AEB0 80010450 4182005C */  beq     lbl_800104AC
/* 00AEB4 80010454 881F0647 */  lbz     r0, 0x647(r31)
/* 00AEB8 80010458 28000000 */  cmplwi  r0, 0
/* 00AEBC 8001045C 41820044 */  beq     lbl_800104A0
/* 00AEC0 80010460 3B9F0690 */  addi    r28, r31, 0x690
/* 00AEC4 80010464 807F0694 */  lwz     r3, 0x694(r31)
/* 00AEC8 80010468 801F0690 */  lwz     r0, 0x690(r31)
/* 00AECC 8001046C 7C030050 */  subf    r0, r3, r0
/* 00AED0 80010470 2C000001 */  cmpwi   r0, 1
/* 00AED4 80010474 41810038 */  bgt     lbl_800104AC
/* 00AED8 80010478 38600000 */  li      r3, 0
/* 00AEDC 8001047C 48002F51 */  bl      PopDecodedTextureSet
/* 00AEE0 80010480 809F0678 */  lwz     r4, 0x678(r31)
/* 00AEE4 80010484 3BA30000 */  addi    r29, r3, 0
/* 00AEE8 80010488 3804FFFF */  addi    r0, r4, -1
/* 00AEEC 8001048C 901F0678 */  stw     r0, 0x678(r31)
/* 00AEF0 80010490 807C0000 */  lwz     r3, 0(r28)
/* 00AEF4 80010494 38030001 */  addi    r0, r3, 1
/* 00AEF8 80010498 901C0000 */  stw     r0, 0(r28)
/* 00AEFC 8001049C 48000010 */  b       lbl_800104AC
lbl_800104A0:
/* 00AF00 800104A0 38600000 */  li      r3, 0
/* 00AF04 800104A4 48002F29 */  bl      PopDecodedTextureSet
/* 00AF08 800104A8 7C7D1B78 */  mr      r29, r3
lbl_800104AC:
/* 00AF0C 800104AC 281D0000 */  cmplwi  r29, 0
/* 00AF10 800104B0 41820028 */  beq     lbl_800104D8
/* 00AF14 800104B4 3C1D0001 */  addis   r0, r29, 1
/* 00AF18 800104B8 2800FFFF */  cmplwi  r0, 0xffff
/* 00AF1C 800104BC 4182001C */  beq     lbl_800104D8
/* 00AF20 800104C0 3B9F0698 */  addi    r28, r31, 0x698
/* 00AF24 800104C4 807F0698 */  lwz     r3, 0x698(r31)
/* 00AF28 800104C8 28030000 */  cmplwi  r3, 0
/* 00AF2C 800104CC 41820008 */  beq     lbl_800104D4
/* 00AF30 800104D0 48000319 */  bl      PushUsedTextureSet
lbl_800104D4:
/* 00AF34 800104D4 93BC0000 */  stw     r29, 0(r28)
lbl_800104D8:
/* 00AF38 800104D8 881F0646 */  lbz     r0, 0x646(r31)
/* 00AF3C 800104DC 540007FF */  clrlwi. r0, r0, 0x1f
/* 00AF40 800104E0 4082008C */  bne     lbl_8001056C
/* 00AF44 800104E4 881F0647 */  lbz     r0, 0x647(r31)
/* 00AF48 800104E8 28000000 */  cmplwi  r0, 0
/* 00AF4C 800104EC 41820038 */  beq     lbl_80010524
/* 00AF50 800104F0 809F0694 */  lwz     r4, 0x694(r31)
/* 00AF54 800104F4 807F0660 */  lwz     r3, 0x660(r31)
/* 00AF58 800104F8 801F05F0 */  lwz     r0, 0x5f0(r31)
/* 00AF5C 800104FC 7C641A14 */  add     r3, r4, r3
/* 00AF60 80010500 7C030040 */  cmplw   r3, r0
/* 00AF64 80010504 40820068 */  bne     lbl_8001056C
/* 00AF68 80010508 801F069C */  lwz     r0, 0x69c(r31)
/* 00AF6C 8001050C 28000000 */  cmplwi  r0, 0
/* 00AF70 80010510 4082005C */  bne     lbl_8001056C
/* 00AF74 80010514 38000003 */  li      r0, 3
/* 00AF78 80010518 981F0645 */  stb     r0, 0x645(r31)
/* 00AF7C 8001051C 981E0000 */  stb     r0, 0(r30)
/* 00AF80 80010520 4800004C */  b       lbl_8001056C
lbl_80010524:
/* 00AF84 80010524 807F0698 */  lwz     r3, 0x698(r31)
/* 00AF88 80010528 28030000 */  cmplwi  r3, 0
/* 00AF8C 8001052C 41820014 */  beq     lbl_80010540
/* 00AF90 80010530 8063000C */  lwz     r3, 0xc(r3)
/* 00AF94 80010534 801F0660 */  lwz     r0, 0x660(r31)
/* 00AF98 80010538 7C830214 */  add     r4, r3, r0
/* 00AF9C 8001053C 4800000C */  b       lbl_80010548
lbl_80010540:
/* 00AFA0 80010540 807F0660 */  lwz     r3, 0x660(r31)
/* 00AFA4 80010544 3883FFFF */  addi    r4, r3, -1
lbl_80010548:
/* 00AFA8 80010548 807F05F0 */  lwz     r3, 0x5f0(r31)
/* 00AFAC 8001054C 3803FFFF */  addi    r0, r3, -1
/* 00AFB0 80010550 7C040040 */  cmplw   r4, r0
/* 00AFB4 80010554 40820018 */  bne     lbl_8001056C
/* 00AFB8 80010558 281D0000 */  cmplwi  r29, 0
/* 00AFBC 8001055C 40820010 */  bne     lbl_8001056C
/* 00AFC0 80010560 38000003 */  li      r0, 3
/* 00AFC4 80010564 981F0645 */  stb     r0, 0x645(r31)
/* 00AFC8 80010568 981E0000 */  stb     r0, 0(r30)
lbl_8001056C:
/* 00AFCC 8001056C 80010024 */  lwz     r0, 0x24(r1)
/* 00AFD0 80010570 83E1001C */  lwz     r31, 0x1c(r1)
/* 00AFD4 80010574 83C10018 */  lwz     r30, 0x18(r1)
/* 00AFD8 80010578 7C0803A6 */  mtlr    r0
/* 00AFDC 8001057C 83A10014 */  lwz     r29, 0x14(r1)
/* 00AFE0 80010580 83810010 */  lwz     r28, 0x10(r1)
/* 00AFE4 80010584 38210020 */  addi    r1, r1, 0x20
/* 00AFE8 80010588 4E800020 */  blr     

ProperTimingForStart:
/* 00AFEC 8001058C 7C0802A6 */  mflr    r0
/* 00AFF0 80010590 3C608010 */  lis     r3, ActivePlayer@ha
/* 00AFF4 80010594 90010004 */  stw     r0, 4(r1)
/* 00AFF8 80010598 38639C80 */  addi    r3, r3, ActivePlayer@l
/* 00AFFC 8001059C 9421FFF8 */  stwu    r1, -8(r1)
/* 00B000 800105A0 80630088 */  lwz     r3, 0x88(r3)
/* 00B004 800105A4 546007FF */  clrlwi. r0, r3, 0x1f
/* 00B008 800105A8 41820018 */  beq     lbl_800105C0
/* 00B00C 800105AC 4809731D */  bl      VIGetNextField
/* 00B010 800105B0 28030000 */  cmplwi  r3, 0
/* 00B014 800105B4 40820030 */  bne     lbl_800105E4
/* 00B018 800105B8 38600001 */  li      r3, 1
/* 00B01C 800105BC 4800002C */  b       lbl_800105E8
lbl_800105C0:
/* 00B020 800105C0 546007BD */  rlwinm. r0, r3, 0, 0x1e, 0x1e
/* 00B024 800105C4 41820018 */  beq     lbl_800105DC
/* 00B028 800105C8 48097301 */  bl      VIGetNextField
/* 00B02C 800105CC 28030001 */  cmplwi  r3, 1
/* 00B030 800105D0 40820014 */  bne     lbl_800105E4
/* 00B034 800105D4 38600001 */  li      r3, 1
/* 00B038 800105D8 48000010 */  b       lbl_800105E8
lbl_800105DC:
/* 00B03C 800105DC 38600001 */  li      r3, 1
/* 00B040 800105E0 48000008 */  b       lbl_800105E8
lbl_800105E4:
/* 00B044 800105E4 38600000 */  li      r3, 0
lbl_800105E8:
/* 00B048 800105E8 8001000C */  lwz     r0, 0xc(r1)
/* 00B04C 800105EC 38210008 */  addi    r1, r1, 8
/* 00B050 800105F0 7C0803A6 */  mtlr    r0
/* 00B054 800105F4 4E800020 */  blr     

ProperTimingForGettingNextFrame:
/* 00B058 800105F8 7C0802A6 */  mflr    r0
/* 00B05C 800105FC 3C608010 */  lis     r3, WorkBuffer@ha
/* 00B060 80010600 90010004 */  stw     r0, 4(r1)
/* 00B064 80010604 9421FFE8 */  stwu    r1, -0x18(r1)
/* 00B068 80010608 93E10014 */  stw     r31, 0x14(r1)
/* 00B06C 8001060C 3BE396E0 */  addi    r31, r3, WorkBuffer@l
/* 00B070 80010610 93C10010 */  stw     r30, 0x10(r1)
/* 00B074 80010614 807F0628 */  lwz     r3, 0x628(r31)
/* 00B078 80010618 546007FF */  clrlwi. r0, r3, 0x1f
/* 00B07C 8001061C 41820018 */  beq     lbl_80010634
/* 00B080 80010620 480972A9 */  bl      VIGetNextField
/* 00B084 80010624 28030000 */  cmplwi  r3, 0
/* 00B088 80010628 408200D8 */  bne     lbl_80010700
/* 00B08C 8001062C 38600001 */  li      r3, 1
/* 00B090 80010630 480000D4 */  b       lbl_80010704
lbl_80010634:
/* 00B094 80010634 546007BD */  rlwinm. r0, r3, 0, 0x1e, 0x1e
/* 00B098 80010638 41820018 */  beq     lbl_80010650
/* 00B09C 8001063C 4809728D */  bl      VIGetNextField
/* 00B0A0 80010640 28030001 */  cmplwi  r3, 1
/* 00B0A4 80010644 408200BC */  bne     lbl_80010700
/* 00B0A8 80010648 38600001 */  li      r3, 1
/* 00B0AC 8001064C 480000B8 */  b       lbl_80010704
lbl_80010650:
/* 00B0B0 80010650 C0228074 */  lfs     f1, D_80135D74@sda21(r2)
/* 00B0B4 80010654 C01F05EC */  lfs     f0, 0x5ec(r31)
/* 00B0B8 80010658 EC010032 */  fmuls   f0, f1, f0
/* 00B0BC 8001065C FC00001E */  fctiwz  f0, f0
/* 00B0C0 80010660 D8010008 */  stfd    f0, 8(r1)
/* 00B0C4 80010664 83C1000C */  lwz     r30, 0xc(r1)
/* 00B0C8 80010668 48097395 */  bl      VIGetTvFormat
/* 00B0CC 8001066C 28030001 */  cmplwi  r3, 1
/* 00B0D0 80010670 4082003C */  bne     lbl_800106AC
/* 00B0D4 80010674 80DF066C */  lwz     r6, 0x66c(r31)
/* 00B0D8 80010678 7FC4FE70 */  srawi   r4, r30, 0x1f
/* 00B0DC 8001067C 807F0668 */  lwz     r3, 0x668(r31)
/* 00B0E0 80010680 38A00000 */  li      r5, 0
/* 00B0E4 80010684 7C06F016 */  mulhwu  r0, r6, r30
/* 00B0E8 80010688 7C63F1D6 */  mullw   r3, r3, r30
/* 00B0EC 8001068C 7C630214 */  add     r3, r3, r0
/* 00B0F0 80010690 7C0621D6 */  mullw   r0, r6, r4
/* 00B0F4 80010694 7C86F1D6 */  mullw   r4, r6, r30
/* 00B0F8 80010698 7C630214 */  add     r3, r3, r0
/* 00B0FC 8001069C 38C01388 */  li      r6, 0x1388
/* 00B100 800106A0 480BD37D */  bl      __div2i
/* 00B104 800106A4 909F0674 */  stw     r4, 0x674(r31)
/* 00B108 800106A8 48000038 */  b       lbl_800106E0
lbl_800106AC:
/* 00B10C 800106AC 80DF066C */  lwz     r6, 0x66c(r31)
/* 00B110 800106B0 7FC4FE70 */  srawi   r4, r30, 0x1f
/* 00B114 800106B4 807F0668 */  lwz     r3, 0x668(r31)
/* 00B118 800106B8 38A00000 */  li      r5, 0
/* 00B11C 800106BC 7C06F016 */  mulhwu  r0, r6, r30
/* 00B120 800106C0 7C63F1D6 */  mullw   r3, r3, r30
/* 00B124 800106C4 7C630214 */  add     r3, r3, r0
/* 00B128 800106C8 7C0621D6 */  mullw   r0, r6, r4
/* 00B12C 800106CC 7C86F1D6 */  mullw   r4, r6, r30
/* 00B130 800106D0 7C630214 */  add     r3, r3, r0
/* 00B134 800106D4 38C0176A */  li      r6, 0x176a
/* 00B138 800106D8 480BD345 */  bl      __div2i
/* 00B13C 800106DC 909F0674 */  stw     r4, 0x674(r31)
lbl_800106E0:
/* 00B140 800106E0 389F0670 */  addi    r4, r31, 0x670
/* 00B144 800106E4 807F0674 */  lwz     r3, 0x674(r31)
/* 00B148 800106E8 801F0670 */  lwz     r0, 0x670(r31)
/* 00B14C 800106EC 7C001800 */  cmpw    r0, r3
/* 00B150 800106F0 41820010 */  beq     lbl_80010700
/* 00B154 800106F4 90640000 */  stw     r3, 0(r4)
/* 00B158 800106F8 38600001 */  li      r3, 1
/* 00B15C 800106FC 48000008 */  b       lbl_80010704
lbl_80010700:
/* 00B160 80010700 38600000 */  li      r3, 0
lbl_80010704:
/* 00B164 80010704 8001001C */  lwz     r0, 0x1c(r1)
/* 00B168 80010708 83E10014 */  lwz     r31, 0x14(r1)
/* 00B16C 8001070C 83C10010 */  lwz     r30, 0x10(r1)
/* 00B170 80010710 7C0803A6 */  mtlr    r0
/* 00B174 80010714 38210018 */  addi    r1, r1, 0x18
/* 00B178 80010718 4E800020 */  blr     

glabel THPPlayerDrawCurrentFrame
/* 00B17C 8001071C 7C0802A6 */  mflr    r0
/* 00B180 80010720 3D008010 */  lis     r8, WorkBuffer@ha
/* 00B184 80010724 90010004 */  stw     r0, 4(r1)
/* 00B188 80010728 9421FFC0 */  stwu    r1, -0x40(r1)
/* 00B18C 8001072C BF410028 */  stmw    r26, 0x28(r1)
/* 00B190 80010730 3BE896E0 */  addi    r31, r8, WorkBuffer@l
/* 00B194 80010734 3B440000 */  addi    r26, r4, 0
/* 00B198 80010738 3B650000 */  addi    r27, r5, 0
/* 00B19C 8001073C 3B860000 */  addi    r28, r6, 0
/* 00B1A0 80010740 3BA70000 */  addi    r29, r7, 0
/* 00B1A4 80010744 801F0640 */  lwz     r0, 0x640(r31)
/* 00B1A8 80010748 2C000000 */  cmpwi   r0, 0
/* 00B1AC 8001074C 41820084 */  beq     lbl_800107D0
/* 00B1B0 80010750 881F0644 */  lbz     r0, 0x644(r31)
/* 00B1B4 80010754 28000000 */  cmplwi  r0, 0
/* 00B1B8 80010758 41820078 */  beq     lbl_800107D0
/* 00B1BC 8001075C 3BDF0698 */  addi    r30, r31, 0x698
/* 00B1C0 80010760 801F0698 */  lwz     r0, 0x698(r31)
/* 00B1C4 80010764 28000000 */  cmplwi  r0, 0
/* 00B1C8 80010768 41820068 */  beq     lbl_800107D0
/* 00B1CC 8001076C 48000AE5 */  bl      THPGXYuv2RgbSetup
/* 00B1D0 80010770 80BE0000 */  lwz     r5, 0(r30)
/* 00B1D4 80010774 7FA00734 */  extsh   r0, r29
/* 00B1D8 80010778 7F460734 */  extsh   r6, r26
/* 00B1DC 8001077C 90010008 */  stw     r0, 8(r1)
/* 00B1E0 80010780 7F670734 */  extsh   r7, r27
/* 00B1E4 80010784 7F8A0734 */  extsh   r10, r28
/* 00B1E8 80010788 809F0620 */  lwz     r4, 0x620(r31)
/* 00B1EC 8001078C 801F0624 */  lwz     r0, 0x624(r31)
/* 00B1F0 80010790 80650000 */  lwz     r3, 0(r5)
/* 00B1F4 80010794 7C880734 */  extsh   r8, r4
/* 00B1F8 80010798 80850004 */  lwz     r4, 4(r5)
/* 00B1FC 8001079C 7C090734 */  extsh   r9, r0
/* 00B200 800107A0 80A50008 */  lwz     r5, 8(r5)
/* 00B204 800107A4 48000FB1 */  bl      THPGXYuv2RgbDraw
/* 00B208 800107A8 48000991 */  bl      THPGXRestore
/* 00B20C 800107AC 807E0000 */  lwz     r3, 0(r30)
/* 00B210 800107B0 801F0660 */  lwz     r0, 0x660(r31)
/* 00B214 800107B4 8083000C */  lwz     r4, 0xc(r3)
/* 00B218 800107B8 807F05F0 */  lwz     r3, 0x5f0(r31)
/* 00B21C 800107BC 7C840214 */  add     r4, r4, r0
/* 00B220 800107C0 7C041B96 */  divwu   r0, r4, r3
/* 00B224 800107C4 7C0019D6 */  mullw   r0, r0, r3
/* 00B228 800107C8 7C602050 */  subf    r3, r0, r4
/* 00B22C 800107CC 48000008 */  b       lbl_800107D4
lbl_800107D0:
/* 00B230 800107D0 3860FFFF */  li      r3, -1
lbl_800107D4:
/* 00B234 800107D4 BB410028 */  lmw     r26, 0x28(r1)
/* 00B238 800107D8 80010044 */  lwz     r0, 0x44(r1)
/* 00B23C 800107DC 38210040 */  addi    r1, r1, 0x40
/* 00B240 800107E0 7C0803A6 */  mtlr    r0
/* 00B244 800107E4 4E800020 */  blr     

PushUsedTextureSet:
/* 00B248 800107E8 7C0802A6 */  mflr    r0
/* 00B24C 800107EC 3CA08010 */  lis     r5, UsedTextureSetQueue@ha
/* 00B250 800107F0 90010004 */  stw     r0, 4(r1)
/* 00B254 800107F4 38830000 */  addi    r4, r3, 0
/* 00B258 800107F8 38659740 */  addi    r3, r5, UsedTextureSetQueue@l
/* 00B25C 800107FC 9421FFF8 */  stwu    r1, -8(r1)
/* 00B260 80010800 38A00000 */  li      r5, 0
/* 00B264 80010804 4808EDDD */  bl      OSSendMessage
/* 00B268 80010808 8001000C */  lwz     r0, 0xc(r1)
/* 00B26C 8001080C 38210008 */  addi    r1, r1, 8
/* 00B270 80010810 7C0803A6 */  mtlr    r0
/* 00B274 80010814 4E800020 */  blr     

glabel THPPlayerDrawDone
/* 00B278 80010818 7C0802A6 */  mflr    r0
/* 00B27C 8001081C 90010004 */  stw     r0, 4(r1)
/* 00B280 80010820 9421FFE8 */  stwu    r1, -0x18(r1)
/* 00B284 80010824 93E10014 */  stw     r31, 0x14(r1)
/* 00B288 80010828 800D8938 */  lwz     r0, Initialized@sda21(r13)
/* 00B28C 8001082C 2C000000 */  cmpwi   r0, 0
/* 00B290 80010830 41820044 */  beq     lbl_80010874
/* 00B294 80010834 3C608010 */  lis     r3, UsedTextureSetQueue@ha
/* 00B298 80010838 3BE39740 */  addi    r31, r3, UsedTextureSetQueue@l
lbl_8001083C:
/* 00B29C 8001083C 387F0000 */  addi    r3, r31, 0
/* 00B2A0 80010840 38810008 */  addi    r4, r1, 8
/* 00B2A4 80010844 38A00000 */  li      r5, 0
/* 00B2A8 80010848 4808EE61 */  bl      OSReceiveMessage
/* 00B2AC 8001084C 2C030001 */  cmpwi   r3, 1
/* 00B2B0 80010850 4082000C */  bne     lbl_8001085C
/* 00B2B4 80010854 80010008 */  lwz     r0, 8(r1)
/* 00B2B8 80010858 48000008 */  b       lbl_80010860
lbl_8001085C:
/* 00B2BC 8001085C 38000000 */  li      r0, 0
lbl_80010860:
/* 00B2C0 80010860 28000000 */  cmplwi  r0, 0
/* 00B2C4 80010864 7C030378 */  mr      r3, r0
/* 00B2C8 80010868 4182000C */  beq     lbl_80010874
/* 00B2CC 8001086C 48002B31 */  bl      PushFreeTextureSet
/* 00B2D0 80010870 4BFFFFCC */  b       lbl_8001083C
lbl_80010874:
/* 00B2D4 80010874 8001001C */  lwz     r0, 0x1c(r1)
/* 00B2D8 80010878 83E10014 */  lwz     r31, 0x14(r1)
/* 00B2DC 8001087C 38210018 */  addi    r1, r1, 0x18
/* 00B2E0 80010880 7C0803A6 */  mtlr    r0
/* 00B2E4 80010884 4E800020 */  blr     

THPAudioMixCallback:
/* 00B2E8 80010888 7C0802A6 */  mflr    r0
/* 00B2EC 8001088C 3C608010 */  lis     r3, WorkBuffer@ha
/* 00B2F0 80010890 90010004 */  stw     r0, 4(r1)
/* 00B2F4 80010894 9421FFF0 */  stwu    r1, -0x10(r1)
/* 00B2F8 80010898 93E1000C */  stw     r31, 0xc(r1)
/* 00B2FC 8001089C 3BE396E0 */  addi    r31, r3, WorkBuffer@l
/* 00B300 800108A0 93C10008 */  stw     r30, 8(r1)
/* 00B304 800108A4 800D8954 */  lwz     r0, AudioSystem@sda21(r13)
/* 00B308 800108A8 2C000000 */  cmpwi   r0, 0
/* 00B30C 800108AC 40820070 */  bne     lbl_8001091C
/* 00B310 800108B0 800D8944 */  lwz     r0, SoundBufferIndex@sda21(r13)
/* 00B314 800108B4 38800280 */  li      r4, 0x280
/* 00B318 800108B8 68000001 */  xori    r0, r0, 1
/* 00B31C 800108BC 900D8944 */  stw     r0, SoundBufferIndex@sda21(r13)
/* 00B320 800108C0 800D8944 */  lwz     r0, SoundBufferIndex@sda21(r13)
/* 00B324 800108C4 1C000280 */  mulli   r0, r0, 0x280
/* 00B328 800108C8 7C7F0214 */  add     r3, r31, r0
/* 00B32C 800108CC 386300A0 */  addi    r3, r3, 0xa0
/* 00B330 800108D0 480A76F9 */  bl      AIInitDMA
/* 00B334 800108D4 4808E43D */  bl      OSEnableInterrupts
/* 00B338 800108D8 800D8944 */  lwz     r0, SoundBufferIndex@sda21(r13)
/* 00B33C 800108DC 3BC30000 */  addi    r30, r3, 0
/* 00B340 800108E0 38800000 */  li      r4, 0
/* 00B344 800108E4 1C000280 */  mulli   r0, r0, 0x280
/* 00B348 800108E8 7C7F0214 */  add     r3, r31, r0
/* 00B34C 800108EC 38A000A0 */  li      r5, 0xa0
/* 00B350 800108F0 386300A0 */  addi    r3, r3, 0xa0
/* 00B354 800108F4 4800010D */  bl      MixAudio
/* 00B358 800108F8 800D8944 */  lwz     r0, SoundBufferIndex@sda21(r13)
/* 00B35C 800108FC 38800280 */  li      r4, 0x280
/* 00B360 80010900 1C000280 */  mulli   r0, r0, 0x280
/* 00B364 80010904 7C7F0214 */  add     r3, r31, r0
/* 00B368 80010908 386300A0 */  addi    r3, r3, 0xa0
/* 00B36C 8001090C 4808CE71 */  bl      DCFlushRange
/* 00B370 80010910 7FC3F378 */  mr      r3, r30
/* 00B374 80010914 4808E411 */  bl      OSRestoreInterrupts
/* 00B378 80010918 480000D0 */  b       lbl_800109E8
lbl_8001091C:
/* 00B37C 8001091C 2C000001 */  cmpwi   r0, 1
/* 00B380 80010920 40820030 */  bne     lbl_80010950
/* 00B384 80010924 800D894C */  lwz     r0, LastAudioBuffer@sda21(r13)
/* 00B388 80010928 28000000 */  cmplwi  r0, 0
/* 00B38C 8001092C 41820008 */  beq     lbl_80010934
/* 00B390 80010930 900D8950 */  stw     r0, CurAudioBuffer@sda21(r13)
lbl_80010934:
/* 00B394 80010934 818D8948 */  lwz     r12, OldAIDCallback@sda21(r13)
/* 00B398 80010938 7D8803A6 */  mtlr    r12
/* 00B39C 8001093C 4E800021 */  blrl    
/* 00B3A0 80010940 480A7761 */  bl      AIGetDMAStartAddr
/* 00B3A4 80010944 3C038000 */  addis   r0, r3, 0x8000
/* 00B3A8 80010948 900D894C */  stw     r0, LastAudioBuffer@sda21(r13)
/* 00B3AC 8001094C 4800001C */  b       lbl_80010968
lbl_80010950:
/* 00B3B0 80010950 818D8948 */  lwz     r12, OldAIDCallback@sda21(r13)
/* 00B3B4 80010954 7D8803A6 */  mtlr    r12
/* 00B3B8 80010958 4E800021 */  blrl    
/* 00B3BC 8001095C 480A7745 */  bl      AIGetDMAStartAddr
/* 00B3C0 80010960 3C038000 */  addis   r0, r3, 0x8000
/* 00B3C4 80010964 900D8950 */  stw     r0, CurAudioBuffer@sda21(r13)
lbl_80010968:
/* 00B3C8 80010968 800D8944 */  lwz     r0, SoundBufferIndex@sda21(r13)
/* 00B3CC 8001096C 38800280 */  li      r4, 0x280
/* 00B3D0 80010970 68000001 */  xori    r0, r0, 1
/* 00B3D4 80010974 900D8944 */  stw     r0, SoundBufferIndex@sda21(r13)
/* 00B3D8 80010978 800D8944 */  lwz     r0, SoundBufferIndex@sda21(r13)
/* 00B3DC 8001097C 1C000280 */  mulli   r0, r0, 0x280
/* 00B3E0 80010980 7C7F0214 */  add     r3, r31, r0
/* 00B3E4 80010984 386300A0 */  addi    r3, r3, 0xa0
/* 00B3E8 80010988 480A7641 */  bl      AIInitDMA
/* 00B3EC 8001098C 4808E385 */  bl      OSEnableInterrupts
/* 00B3F0 80010990 800D8950 */  lwz     r0, CurAudioBuffer@sda21(r13)
/* 00B3F4 80010994 3BC30000 */  addi    r30, r3, 0
/* 00B3F8 80010998 28000000 */  cmplwi  r0, 0
/* 00B3FC 8001099C 41820010 */  beq     lbl_800109AC
/* 00B400 800109A0 7C030378 */  mr      r3, r0
/* 00B404 800109A4 38800280 */  li      r4, 0x280
/* 00B408 800109A8 4808CDA9 */  bl      DCInvalidateRange
lbl_800109AC:
/* 00B40C 800109AC 800D8944 */  lwz     r0, SoundBufferIndex@sda21(r13)
/* 00B410 800109B0 38A000A0 */  li      r5, 0xa0
/* 00B414 800109B4 808D8950 */  lwz     r4, CurAudioBuffer@sda21(r13)
/* 00B418 800109B8 1C000280 */  mulli   r0, r0, 0x280
/* 00B41C 800109BC 7C7F0214 */  add     r3, r31, r0
/* 00B420 800109C0 386300A0 */  addi    r3, r3, 0xa0
/* 00B424 800109C4 4800003D */  bl      MixAudio
/* 00B428 800109C8 800D8944 */  lwz     r0, SoundBufferIndex@sda21(r13)
/* 00B42C 800109CC 38800280 */  li      r4, 0x280
/* 00B430 800109D0 1C000280 */  mulli   r0, r0, 0x280
/* 00B434 800109D4 7C7F0214 */  add     r3, r31, r0
/* 00B438 800109D8 386300A0 */  addi    r3, r3, 0xa0
/* 00B43C 800109DC 4808CDA1 */  bl      DCFlushRange
/* 00B440 800109E0 7FC3F378 */  mr      r3, r30
/* 00B444 800109E4 4808E341 */  bl      OSRestoreInterrupts
lbl_800109E8:
/* 00B448 800109E8 80010014 */  lwz     r0, 0x14(r1)
/* 00B44C 800109EC 83E1000C */  lwz     r31, 0xc(r1)
/* 00B450 800109F0 83C10008 */  lwz     r30, 8(r1)
/* 00B454 800109F4 7C0803A6 */  mtlr    r0
/* 00B458 800109F8 38210010 */  addi    r1, r1, 0x10
/* 00B45C 800109FC 4E800020 */  blr     

MixAudio:
/* 00B460 80010A00 7C0802A6 */  mflr    r0
/* 00B464 80010A04 28040000 */  cmplwi  r4, 0
/* 00B468 80010A08 90010004 */  stw     r0, 4(r1)
/* 00B46C 80010A0C 3CC08010 */  lis     r6, WorkBuffer@ha
/* 00B470 80010A10 9421FFC0 */  stwu    r1, -0x40(r1)
/* 00B474 80010A14 BF210024 */  stmw    r25, 0x24(r1)
/* 00B478 80010A18 3BC696E0 */  addi    r30, r6, WorkBuffer@l
/* 00B47C 80010A1C 418201C4 */  beq     lbl_80010BE0
/* 00B480 80010A20 801E0640 */  lwz     r0, 0x640(r30)
/* 00B484 80010A24 2C000000 */  cmpwi   r0, 0
/* 00B488 80010A28 418201AC */  beq     lbl_80010BD4
/* 00B48C 80010A2C 881E0645 */  lbz     r0, 0x645(r30)
/* 00B490 80010A30 28000002 */  cmplwi  r0, 2
/* 00B494 80010A34 408201A0 */  bne     lbl_80010BD4
/* 00B498 80010A38 881E0647 */  lbz     r0, 0x647(r30)
/* 00B49C 80010A3C 28000000 */  cmplwi  r0, 0
/* 00B4A0 80010A40 41820194 */  beq     lbl_80010BD4
/* 00B4A4 80010A44 3CC0800F */  lis     r6, VolumeTable@ha
/* 00B4A8 80010A48 3B450000 */  addi    r26, r5, 0
/* 00B4AC 80010A4C 3B630000 */  addi    r27, r3, 0
/* 00B4B0 80010A50 3B240000 */  addi    r25, r4, 0
/* 00B4B4 80010A54 3B9E0688 */  addi    r28, r30, 0x688
/* 00B4B8 80010A58 3BE6A1E8 */  addi    r31, r6, VolumeTable@l
/* 00B4BC 80010A5C 3BBE069C */  addi    r29, r30, 0x69c
lbl_80010A60:
/* 00B4C0 80010A60 801D0000 */  lwz     r0, 0(r29)
/* 00B4C4 80010A64 28000000 */  cmplwi  r0, 0
/* 00B4C8 80010A68 40820038 */  bne     lbl_80010AA0
/* 00B4CC 80010A6C 38600000 */  li      r3, 0
/* 00B4D0 80010A70 48000655 */  bl      PopDecodedAudioBuffer
/* 00B4D4 80010A74 28030000 */  cmplwi  r3, 0
/* 00B4D8 80010A78 907D0000 */  stw     r3, 0(r29)
/* 00B4DC 80010A7C 40820018 */  bne     lbl_80010A94
/* 00B4E0 80010A80 387B0000 */  addi    r3, r27, 0
/* 00B4E4 80010A84 38990000 */  addi    r4, r25, 0
/* 00B4E8 80010A88 5745103A */  slwi    r5, r26, 2
/* 00B4EC 80010A8C 4BFF4A39 */  bl      memcpy
/* 00B4F0 80010A90 480002F8 */  b       lbl_80010D88
lbl_80010A94:
/* 00B4F4 80010A94 807E0694 */  lwz     r3, 0x694(r30)
/* 00B4F8 80010A98 38030001 */  addi    r0, r3, 1
/* 00B4FC 80010A9C 901E0694 */  stw     r0, 0x694(r30)
lbl_80010AA0:
/* 00B500 80010AA0 807D0000 */  lwz     r3, 0(r29)
/* 00B504 80010AA4 80030008 */  lwz     r0, 8(r3)
/* 00B508 80010AA8 28000000 */  cmplwi  r0, 0
/* 00B50C 80010AAC 4182FFB4 */  beq     lbl_80010A60
/* 00B510 80010AB0 7C00D040 */  cmplw   r0, r26
/* 00B514 80010AB4 41800008 */  blt     lbl_80010ABC
/* 00B518 80010AB8 7F40D378 */  mr      r0, r26
lbl_80010ABC:
/* 00B51C 80010ABC 28000000 */  cmplwi  r0, 0
/* 00B520 80010AC0 7C0903A6 */  mtctr   r0
/* 00B524 80010AC4 80630004 */  lwz     r3, 4(r3)
/* 00B528 80010AC8 408100C8 */  ble     lbl_80010B90
lbl_80010ACC:
/* 00B52C 80010ACC 809C0000 */  lwz     r4, 0(r28)
/* 00B530 80010AD0 2C040000 */  cmpwi   r4, 0
/* 00B534 80010AD4 41820020 */  beq     lbl_80010AF4
/* 00B538 80010AD8 3884FFFF */  addi    r4, r4, -1
/* 00B53C 80010ADC 909C0000 */  stw     r4, 0(r28)
/* 00B540 80010AE0 C03E067C */  lfs     f1, 0x67c(r30)
/* 00B544 80010AE4 C01E0684 */  lfs     f0, 0x684(r30)
/* 00B548 80010AE8 EC01002A */  fadds   f0, f1, f0
/* 00B54C 80010AEC D01E067C */  stfs    f0, 0x67c(r30)
/* 00B550 80010AF0 4800000C */  b       lbl_80010AFC
lbl_80010AF4:
/* 00B554 80010AF4 C01E0680 */  lfs     f0, 0x680(r30)
/* 00B558 80010AF8 D01E067C */  stfs    f0, 0x67c(r30)
lbl_80010AFC:
/* 00B55C 80010AFC C01E067C */  lfs     f0, 0x67c(r30)
/* 00B560 80010B00 A8830000 */  lha     r4, 0(r3)
/* 00B564 80010B04 FC00001E */  fctiwz  f0, f0
/* 00B568 80010B08 A8B90000 */  lha     r5, 0(r25)
/* 00B56C 80010B0C D8010018 */  stfd    f0, 0x18(r1)
/* 00B570 80010B10 80C1001C */  lwz     r6, 0x1c(r1)
/* 00B574 80010B14 54C6083C */  slwi    r6, r6, 1
/* 00B578 80010B18 7CDF3214 */  add     r6, r31, r6
/* 00B57C 80010B1C A0C60000 */  lhz     r6, 0(r6)
/* 00B580 80010B20 7C8621D6 */  mullw   r4, r6, r4
/* 00B584 80010B24 7C847E70 */  srawi   r4, r4, 0xf
/* 00B588 80010B28 7C852214 */  add     r4, r5, r4
/* 00B58C 80010B2C 2C048000 */  cmpwi   r4, -32768
/* 00B590 80010B30 40800008 */  bge     lbl_80010B38
/* 00B594 80010B34 38808000 */  li      r4, -32768
lbl_80010B38:
/* 00B598 80010B38 2C047FFF */  cmpwi   r4, 0x7fff
/* 00B59C 80010B3C 40810008 */  ble     lbl_80010B44
/* 00B5A0 80010B40 38807FFF */  li      r4, 0x7fff
lbl_80010B44:
/* 00B5A4 80010B44 7C840734 */  extsh   r4, r4
/* 00B5A8 80010B48 B09B0000 */  sth     r4, 0(r27)
/* 00B5AC 80010B4C A8830002 */  lha     r4, 2(r3)
/* 00B5B0 80010B50 A8B90002 */  lha     r5, 2(r25)
/* 00B5B4 80010B54 7C8621D6 */  mullw   r4, r6, r4
/* 00B5B8 80010B58 7C847E70 */  srawi   r4, r4, 0xf
/* 00B5BC 80010B5C 7C852214 */  add     r4, r5, r4
/* 00B5C0 80010B60 2C048000 */  cmpwi   r4, -32768
/* 00B5C4 80010B64 40800008 */  bge     lbl_80010B6C
/* 00B5C8 80010B68 38808000 */  li      r4, -32768
lbl_80010B6C:
/* 00B5CC 80010B6C 2C047FFF */  cmpwi   r4, 0x7fff
/* 00B5D0 80010B70 40810008 */  ble     lbl_80010B78
/* 00B5D4 80010B74 38807FFF */  li      r4, 0x7fff
lbl_80010B78:
/* 00B5D8 80010B78 7C840734 */  extsh   r4, r4
/* 00B5DC 80010B7C B09B0002 */  sth     r4, 2(r27)
/* 00B5E0 80010B80 3B7B0004 */  addi    r27, r27, 4
/* 00B5E4 80010B84 3B390004 */  addi    r25, r25, 4
/* 00B5E8 80010B88 38630004 */  addi    r3, r3, 4
/* 00B5EC 80010B8C 4200FF40 */  bdnz    lbl_80010ACC
lbl_80010B90:
/* 00B5F0 80010B90 80BD0000 */  lwz     r5, 0(r29)
/* 00B5F4 80010B94 7F40D050 */  subf    r26, r0, r26
/* 00B5F8 80010B98 80850008 */  lwz     r4, 8(r5)
/* 00B5FC 80010B9C 7C002050 */  subf    r0, r0, r4
/* 00B600 80010BA0 90050008 */  stw     r0, 8(r5)
/* 00B604 80010BA4 809D0000 */  lwz     r4, 0(r29)
/* 00B608 80010BA8 90640004 */  stw     r3, 4(r4)
/* 00B60C 80010BAC 807D0000 */  lwz     r3, 0(r29)
/* 00B610 80010BB0 80030008 */  lwz     r0, 8(r3)
/* 00B614 80010BB4 28000000 */  cmplwi  r0, 0
/* 00B618 80010BB8 40820010 */  bne     lbl_80010BC8
/* 00B61C 80010BBC 480004D9 */  bl      PushFreeAudioBuffer
/* 00B620 80010BC0 38000000 */  li      r0, 0
/* 00B624 80010BC4 901D0000 */  stw     r0, 0(r29)
lbl_80010BC8:
/* 00B628 80010BC8 281A0000 */  cmplwi  r26, 0
/* 00B62C 80010BCC 418201BC */  beq     lbl_80010D88
/* 00B630 80010BD0 4BFFFE90 */  b       lbl_80010A60
lbl_80010BD4:
/* 00B634 80010BD4 54A5103A */  slwi    r5, r5, 2
/* 00B638 80010BD8 4BFF48ED */  bl      memcpy
/* 00B63C 80010BDC 480001AC */  b       lbl_80010D88
lbl_80010BE0:
/* 00B640 80010BE0 801E0640 */  lwz     r0, 0x640(r30)
/* 00B644 80010BE4 2C000000 */  cmpwi   r0, 0
/* 00B648 80010BE8 41820194 */  beq     lbl_80010D7C
/* 00B64C 80010BEC 881E0645 */  lbz     r0, 0x645(r30)
/* 00B650 80010BF0 28000002 */  cmplwi  r0, 2
/* 00B654 80010BF4 40820188 */  bne     lbl_80010D7C
/* 00B658 80010BF8 881E0647 */  lbz     r0, 0x647(r30)
/* 00B65C 80010BFC 28000000 */  cmplwi  r0, 0
/* 00B660 80010C00 4182017C */  beq     lbl_80010D7C
/* 00B664 80010C04 3C80800F */  lis     r4, VolumeTable@ha
/* 00B668 80010C08 3B650000 */  addi    r27, r5, 0
/* 00B66C 80010C0C 3B430000 */  addi    r26, r3, 0
/* 00B670 80010C10 3BBE0688 */  addi    r29, r30, 0x688
/* 00B674 80010C14 3BE4A1E8 */  addi    r31, r4, VolumeTable@l
/* 00B678 80010C18 3B9E069C */  addi    r28, r30, 0x69c
lbl_80010C1C:
/* 00B67C 80010C1C 801C0000 */  lwz     r0, 0(r28)
/* 00B680 80010C20 28000000 */  cmplwi  r0, 0
/* 00B684 80010C24 40820038 */  bne     lbl_80010C5C
/* 00B688 80010C28 38600000 */  li      r3, 0
/* 00B68C 80010C2C 48000499 */  bl      PopDecodedAudioBuffer
/* 00B690 80010C30 28030000 */  cmplwi  r3, 0
/* 00B694 80010C34 907C0000 */  stw     r3, 0(r28)
/* 00B698 80010C38 40820018 */  bne     lbl_80010C50
/* 00B69C 80010C3C 387A0000 */  addi    r3, r26, 0
/* 00B6A0 80010C40 5765103A */  slwi    r5, r27, 2
/* 00B6A4 80010C44 38800000 */  li      r4, 0
/* 00B6A8 80010C48 4BFF4789 */  bl      memset
/* 00B6AC 80010C4C 4800013C */  b       lbl_80010D88
lbl_80010C50:
/* 00B6B0 80010C50 807E0694 */  lwz     r3, 0x694(r30)
/* 00B6B4 80010C54 38030001 */  addi    r0, r3, 1
/* 00B6B8 80010C58 901E0694 */  stw     r0, 0x694(r30)
lbl_80010C5C:
/* 00B6BC 80010C5C 807C0000 */  lwz     r3, 0(r28)
/* 00B6C0 80010C60 80830008 */  lwz     r4, 8(r3)
/* 00B6C4 80010C64 28040000 */  cmplwi  r4, 0
/* 00B6C8 80010C68 4182FFB4 */  beq     lbl_80010C1C
/* 00B6CC 80010C6C 7C04D840 */  cmplw   r4, r27
/* 00B6D0 80010C70 41800008 */  blt     lbl_80010C78
/* 00B6D4 80010C74 7F64DB78 */  mr      r4, r27
lbl_80010C78:
/* 00B6D8 80010C78 28040000 */  cmplwi  r4, 0
/* 00B6DC 80010C7C 7C8903A6 */  mtctr   r4
/* 00B6E0 80010C80 80A30004 */  lwz     r5, 4(r3)
/* 00B6E4 80010C84 408100B4 */  ble     lbl_80010D38
lbl_80010C88:
/* 00B6E8 80010C88 807D0000 */  lwz     r3, 0(r29)
/* 00B6EC 80010C8C 2C030000 */  cmpwi   r3, 0
/* 00B6F0 80010C90 41820020 */  beq     lbl_80010CB0
/* 00B6F4 80010C94 3803FFFF */  addi    r0, r3, -1
/* 00B6F8 80010C98 901D0000 */  stw     r0, 0(r29)
/* 00B6FC 80010C9C C03E067C */  lfs     f1, 0x67c(r30)
/* 00B700 80010CA0 C01E0684 */  lfs     f0, 0x684(r30)
/* 00B704 80010CA4 EC01002A */  fadds   f0, f1, f0
/* 00B708 80010CA8 D01E067C */  stfs    f0, 0x67c(r30)
/* 00B70C 80010CAC 4800000C */  b       lbl_80010CB8
lbl_80010CB0:
/* 00B710 80010CB0 C01E0680 */  lfs     f0, 0x680(r30)
/* 00B714 80010CB4 D01E067C */  stfs    f0, 0x67c(r30)
lbl_80010CB8:
/* 00B718 80010CB8 C01E067C */  lfs     f0, 0x67c(r30)
/* 00B71C 80010CBC A8050000 */  lha     r0, 0(r5)
/* 00B720 80010CC0 FC00001E */  fctiwz  f0, f0
/* 00B724 80010CC4 D8010018 */  stfd    f0, 0x18(r1)
/* 00B728 80010CC8 8061001C */  lwz     r3, 0x1c(r1)
/* 00B72C 80010CCC 5463083C */  slwi    r3, r3, 1
/* 00B730 80010CD0 7C7F1A14 */  add     r3, r31, r3
/* 00B734 80010CD4 A0630000 */  lhz     r3, 0(r3)
/* 00B738 80010CD8 7C0301D6 */  mullw   r0, r3, r0
/* 00B73C 80010CDC 7C007E70 */  srawi   r0, r0, 0xf
/* 00B740 80010CE0 2C008000 */  cmpwi   r0, -32768
/* 00B744 80010CE4 40800008 */  bge     lbl_80010CEC
/* 00B748 80010CE8 38008000 */  li      r0, -32768
lbl_80010CEC:
/* 00B74C 80010CEC 2C007FFF */  cmpwi   r0, 0x7fff
/* 00B750 80010CF0 40810008 */  ble     lbl_80010CF8
/* 00B754 80010CF4 38007FFF */  li      r0, 0x7fff
lbl_80010CF8:
/* 00B758 80010CF8 7C000734 */  extsh   r0, r0
/* 00B75C 80010CFC B01A0000 */  sth     r0, 0(r26)
/* 00B760 80010D00 A8050002 */  lha     r0, 2(r5)
/* 00B764 80010D04 7C0301D6 */  mullw   r0, r3, r0
/* 00B768 80010D08 7C007E70 */  srawi   r0, r0, 0xf
/* 00B76C 80010D0C 2C008000 */  cmpwi   r0, -32768
/* 00B770 80010D10 40800008 */  bge     lbl_80010D18
/* 00B774 80010D14 38008000 */  li      r0, -32768
lbl_80010D18:
/* 00B778 80010D18 2C007FFF */  cmpwi   r0, 0x7fff
/* 00B77C 80010D1C 40810008 */  ble     lbl_80010D24
/* 00B780 80010D20 38007FFF */  li      r0, 0x7fff
lbl_80010D24:
/* 00B784 80010D24 7C000734 */  extsh   r0, r0
/* 00B788 80010D28 B01A0002 */  sth     r0, 2(r26)
/* 00B78C 80010D2C 3B5A0004 */  addi    r26, r26, 4
/* 00B790 80010D30 38A50004 */  addi    r5, r5, 4
/* 00B794 80010D34 4200FF54 */  bdnz    lbl_80010C88
lbl_80010D38:
/* 00B798 80010D38 807C0000 */  lwz     r3, 0(r28)
/* 00B79C 80010D3C 7F64D850 */  subf    r27, r4, r27
/* 00B7A0 80010D40 80030008 */  lwz     r0, 8(r3)
/* 00B7A4 80010D44 7C040050 */  subf    r0, r4, r0
/* 00B7A8 80010D48 90030008 */  stw     r0, 8(r3)
/* 00B7AC 80010D4C 807C0000 */  lwz     r3, 0(r28)
/* 00B7B0 80010D50 90A30004 */  stw     r5, 4(r3)
/* 00B7B4 80010D54 807C0000 */  lwz     r3, 0(r28)
/* 00B7B8 80010D58 80030008 */  lwz     r0, 8(r3)
/* 00B7BC 80010D5C 28000000 */  cmplwi  r0, 0
/* 00B7C0 80010D60 40820010 */  bne     lbl_80010D70
/* 00B7C4 80010D64 48000331 */  bl      PushFreeAudioBuffer
/* 00B7C8 80010D68 38000000 */  li      r0, 0
/* 00B7CC 80010D6C 901C0000 */  stw     r0, 0(r28)
lbl_80010D70:
/* 00B7D0 80010D70 281B0000 */  cmplwi  r27, 0
/* 00B7D4 80010D74 41820014 */  beq     lbl_80010D88
/* 00B7D8 80010D78 4BFFFEA4 */  b       lbl_80010C1C
lbl_80010D7C:
/* 00B7DC 80010D7C 54A5103A */  slwi    r5, r5, 2
/* 00B7E0 80010D80 38800000 */  li      r4, 0
/* 00B7E4 80010D84 4BFF464D */  bl      memset
lbl_80010D88:
/* 00B7E8 80010D88 BB210024 */  lmw     r25, 0x24(r1)
/* 00B7EC 80010D8C 80010044 */  lwz     r0, 0x44(r1)
/* 00B7F0 80010D90 38210040 */  addi    r1, r1, 0x40
/* 00B7F4 80010D94 7C0803A6 */  mtlr    r0
/* 00B7F8 80010D98 4E800020 */  blr     

.section .data, "wa"

.balign 8

/* 000E7268 800EA1E8 0100 */
VolumeTable:
    .long 0x00000002, 0x00080012, 0x00200032, 0x00490063, 0x008200A4, 0x00CB00F5, 0x01240157, 0x018E01C9, 0x0208024B, 0x029202DD, 0x032C037F, 0x03D70432, 0x049204F5, 0x055D05C9, 0x063806AC, 0x072407A0
    .long 0x082008A4, 0x092C09B8, 0x0A480ADD, 0x0B750C12, 0x0CB20D57, 0x0DFF0EAC, 0x0F5D1012, 0x10CA1187, 0x1248130D, 0x13D714A4, 0x1575164A, 0x17241801, 0x18E319C8, 0x1AB21BA0, 0x1C911D87, 0x1E811F7F
    .long 0x20812187, 0x2291239F, 0x24B225C8, 0x26E22801, 0x29232A4A, 0x2B752CA3, 0x2DD62F0D, 0x30483187, 0x32CA3411, 0x355C36AB, 0x37FF3956, 0x3AB13C11, 0x3D743EDC, 0x404841B7, 0x432B44A3, 0x461F479F
    .long 0x49234AAB, 0x4C374DC7, 0x4F5C50F4, 0x52905431, 0x55D6577E, 0x592B5ADC, 0x5C905E49, 0x600661C7, 0x638C6555, 0x672268F4, 0x6AC96CA2, 0x6E807061, 0x72477430, 0x761E7810, 0x7A067C00, 0x7DFE8000

/* 000E7368 800EA2E8 003C */
D_800EA2E8:
    .asciz "Pleae call AXInit or sndInit before you call THPPlayerInit\n"
    .balign 4

/* 000E73A4 800EA324 003B */
D_800EA324:
    .asciz "You must call THPPlayerInit before you call this function\n"
    .balign 4

/* 000E73E0 800EA360 0035 */
D_800EA360:
    .asciz "Can't open %s because a thp file is already opened.\n"
    .balign 4

/* 000E7418 800EA398 0010 */
D_800EA398:
    .asciz "Can't open %s.\n"
    .balign 4

/* 000E7428 800EA3A8 001E */
D_800EA3A8:
    .asciz "This file is not a THP file.\n"
    .balign 4

/* 000E7448 800EA3C8 0012 */
D_800EA3C8:
    .asciz "invalid version.\n"
    .balign 4

/* 000E745C 800EA3DC 001B */
D_800EA3DC:
    .asciz "Unknown frame components.\n"
    .balign 4

/* 000E7478 800EA3F8 002C */
D_800EA3F8:
    .asciz "This thp file doesn't have the offset data\n"
    .balign 4

/* 000E74A4 800EA424 0033 */
D_800EA424:
    .asciz "Specified frame number is over total frame number\n"
    .balign 4

/* 000E74D8 800EA458 0029 */
D_800EA458:
    .asciz "Specified audio track number is invalid\n"
    .balign 4

.section .bss, "wa"

.balign 4

/* 000F6760 800F96E0 0040 */
WorkBuffer:
    .skip 64

/* 000F67A0 800F9720 0020 */
PrepareReadyQueue:
    .skip 32

/* 000F67C0 800F9740 0020 */
UsedTextureSetQueue:
    .skip 32

/* 000F67E0 800F9760 000C */
UsedTextureSetMessage:
    .skip 12

.balign 32

/* 000F6800 800F9780 0500 */
SoundBuffer:
    .skip 1280

/* 000F6D00 800F9C80 01D0 */
glabel ActivePlayer
    .skip 464

.section .sdata, "wa"

.balign 8

/* 000F1030 80134DB0 0004 */
D_80134DB0:
    .asciz "THP"
    .balign 4

.section .sbss, "wa"

.balign 8

/* 000F1898 80135618 0004 */
Initialized:
    .skip 4

/* 000F189C 8013561C 0004 */
PrepareReadyMessage:
    .skip 4

/* 000F18A0 80135620 0004 */
OldVIPostCallback:
    .skip 4

/* 000F18A4 80135624 0004 */
SoundBufferIndex:
    .skip 4

/* 000F18A8 80135628 0004 */
OldAIDCallback:
    .skip 4

/* 000F18AC 8013562C 0004 */
LastAudioBuffer:
    .skip 4

/* 000F18B0 80135630 0004 */
CurAudioBuffer:
    .skip 4

/* 000F18B4 80135634 0004 */
AudioSystem:
    .skip 4

.section .sdata2, "wa"

.balign 8

/* 000F1870 80135D70 0004 */
D_80135D70:
    .float 127.0

/* 000F1874 80135D74 0004 */
D_80135D74:
    .float 100.0
